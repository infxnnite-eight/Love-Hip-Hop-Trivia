/*! For license information please see 83440-c-7e10ec0a28.js.LICENSE.txt */
"use strict";(globalThis["webpackChunkcanvas_lms"]=globalThis["webpackChunkcanvas_lms"]||[]).push([[83440],{8922:(e,t,i)=>{i.d(t,{Z:()=>h})
var o=i(64598)
var n=i(61323)
var s=i(6507)
var a=i.n(s)
var r=i(25683)
var l=i.n(r)
var c=i(87155)
i(60314)
const u=(0,n.useScope)("dialog");(0,o.l)(d,c.ZP.View)
function d(){this.cancel=this.cancel.bind(this)
return d.__super__.constructor.apply(this,arguments)}d.prototype.initialize=function(){d.__super__.initialize.apply(this,arguments)
this.initDialog()
return this.setElement(this.dialog)}
d.prototype.defaultOptions=function(){return{autoOpen:false,width:420,resizable:false,buttons:[],destroy:false}}
d.prototype.initDialog=function(){const e=l().extend({},this.defaultOptions(),{buttons:[{text:u.t("#buttons.cancel","Cancel"),class:"cancel_button",click:(t=this,function(e){return t.cancel(e)})},{text:u.t("#buttons.update","Update"),class:"btn-primary",click:function(e){return function(t){return e.update(t)}}(this)}]},l().result(this,"dialogOptions"))
var t
this.dialog=a()('<div id="'+e.id+'"></div>').appendTo("body").dialog(e)
e.containerId&&this.dialog.parent().attr("id",e.containerId)
a()(".ui-resizable-handle").attr("aria-hidden",true)
return this.dialog}
d.prototype.show=function(){return this.dialog.dialog("open")}
d.prototype.close=function(){return this.options.destroy?this.dialog.dialog("destroy"):this.dialog.dialog("close")}
d.prototype.update=function(e){throw"Not yet implemented"}
d.prototype.cancel=function(e){e.preventDefault()
return this.close()}
const h=d},4267:(e,t,i)=>{i.d(t,{Z:()=>v})
var o=i(64598)
var n=i(87155)
var s=i(28820)
var a=i(6507)
var r=i.n(a)
var l=i(25683)
var c=i.n(l)
var u=i(61323)
i(58158)
i(5777)
i(38798)
var d=i(2610)
var h=i(41354)
var p=i(82044)
function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["message"]
const i={...e}
t.forEach((e=>{if(!i[e])return
i[e]=(0,p.Z)(i[e])}))
return i}const _=(0,u.useScope)("errors")
const f=[].slice;(0,o.l)(g,n.ZP.View)
function g(){this.checkUnload=this.checkUnload.bind(this)
this.watchUnload=this.watchUnload.bind(this)
this.onSaveFail=this.onSaveFail.bind(this)
this.onSaveSuccess=this.onSaveSuccess.bind(this)
return g.__super__.constructor.apply(this,arguments)}g.mixin(s.Z)
g.prototype.tagName="form"
g.prototype.className="validated-form-view"
g.prototype.events={submit:"submit"}
g.prototype.saveOpts={wait:true}
g.prototype.disableWhileLoadingOpts={}
g.prototype.submit=function(e,t){let i,o,n,s,a,l
null==t&&(t=d.lW)
null!=e&&e.preventDefault()
this.hideErrors()
const u=this.$el.find("textarea[data-rich_text]").toArray()
a=true
u.length>0&&(a=u.map((function(e){return t(r()(e),"checkReadyToGetCode",window.confirm)})).every((function(e){return e})))
if(!a)return
const h=this.getFormData()
const p=this.validateBeforeSave(h,{})
if(0===c().keys(p).length){n=new(r().Deferred)
l=this.saveFormData(h)
l.then(this.onSaveSuccess.bind(this),this.onSaveFail.bind(this))
l.fail((m=this,function(){n.reject()
if(m.setFocusAfterError)return m.setFocusAfterError()}))
this.dontRenableAfterSaveSuccess||l.done((function(){return n.resolve()}))
this.$el.disableWhileLoading(n,this.disableWhileLoadingOpts)
u.length>0&&u.forEach((function(e){return t(r()(e),"RCEClosed")}))
this.trigger("submit")
return l}{o=c().map(r()("[data-error-type]"),(function(e){return r()(e).attr("data-error-type")}))
i=c().chain(c().keys(p)).reject((function(e){return c().includes(o,e)})).value()
s=i[0]||o[0]
this.findField(s).focus()
let e=p
if("WikiPageEditView"===this.constructor.name&&window.ENV.FEATURES.permanent_page_links){const{title:t,...i}=p
e=i}return window.setTimeout(function(t){return function(){t.showErrors(e)
return null}}(this),50)}var m}
g.prototype.cancel=function(){const e=this.$el.find("textarea[data-rich_text]").toArray()
return e.forEach((function(e){return(0,d.lW)(r()(e),"RCEClosed")}))}
g.prototype.getFormData=function(){return m(this.$el.toJSON())}
g.prototype.saveFormData=function(e){null==e&&(e=null)
const t=this.model
e||(e=this.getFormData())
const i=this.saveOpts
return t.save(e,i)}
g.prototype.validate=function(e){null==e&&(e={})
e||(e={})
const t=e.data||this.getFormData()
const i=this.validateFormData(t,{})
this.hideErrors()
this.showErrors(i)
return 0===i.length}
g.prototype.validateFormData=function(e){return{}}
g.prototype.validateBeforeSave=function(e){return this.validateFormData(e)}
g.prototype.hideErrors=function(){return this.$el.hideErrors()}
g.prototype.onSaveSuccess=function(e){return this.trigger.apply(this,["success",e].concat(f.call(arguments)))}
g.prototype.onSaveFail=function(e){let t
t=this.parseErrorResponse(e)
t||(t={})
this.showErrors(t)
return this.trigger.apply(this,["fail",t].concat(f.call(arguments)))}
g.prototype.parseErrorResponse=function(e){if(422===e.status)return{authenticity_token:"invalid"}
try{return r().parseJSON(e.responseText).errors}catch(e){return{}}}
g.prototype.translations=(0,h.u)({},{required:()=>_.t("required","Required"),blank:()=>_.t("blank","Required"),unsaved:()=>_.t("unsaved_changes","You have unsaved changes.")})
g.prototype.fieldSelectors=null
g.prototype.findField=function(e){let t,i
const o=(null!=(i=this.fieldSelectors)?i[e]:void 0)||"[name='"+e+"']"
t=this.$(o)
0===t.length&&(t=this.$("[data-error-type='"+e+"']"))
t.data("rich_text")&&(t=this.findSiblingTinymce(t))
t.length>1&&(t=t.not("[type=hidden]"))
return t}
g.prototype.castJSON=function(e){if(!c().isObject(e))return e
if(null!=e.toJSON)return e.toJSON()
const t=c().clone(e)
c().each(t,(i=this,function(e,o){return t[o]=i.castJSON(e)}))
var i
return t}
g.prototype.original=null
g.prototype.watchUnload=function(){this.original=this.castJSON(this.getFormData())
this.unwatchUnload()
return r()(window).on("beforeunload",this.checkUnload)}
g.prototype.unwatchUnload=function(){return r()(window).off("beforeunload",this.checkUnload)}
g.prototype.checkUnload=function(){const e=this.castJSON(this.getFormData())
if(!c().isEqual(this.original,e))return this.translations.unsaved}
const v=g},70265:(e,t,i)=>{i.d(t,{Z:()=>p})
var o=i(25683)
var n=i.n(o)
var s=i(61323)
var a=i(17538)
const r=(0,s.useScope)("CalculationMethodContent")
n().mixin({sum(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null
let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0
return n().reduce(e,((e,i)=>(null!=t?t(i):i)+e),i)}})
const l=(e,t)=>Array.from({length:e.length-t+1},((i,o)=>e.slice(o,o+t)))
class c{constructor(e,t){this.weight=e
this.range=t
this.rest=this.range.slice(0,-1)
this.last=n().last(this.range)}value(){const e=n().sum(this.rest)/this.rest.length*this.toPercentage(this.remainder())+this.last*this.toPercentage(this.weight)
return Math.round(100*e)/100}remainder(){return 100-this.weight}toPercentage(e){return e/100}}class u{constructor(e,t){this.weight=e
this.range=t}value(){let e=null
const t=l(this.range,2)
t.forEach((t=>{e=null==e?this.calculateDecayAverage(t[0],t[1]):this.calculateDecayAverage(e,t[1])}))
return Math.round(100*e)/100}remainder(){return 100-this.weight}toPercentage(e){return e/100}calculateDecayAverage(e,t){return e*this.toPercentage(this.remainder())+t*this.toPercentage(this.weight)}}class d{constructor(e,t,i){this.n=e
this.mastery_points=t
this.range=i}aboveMastery(){return n().filter(this.range,(e=>e>=this.mastery_points))}value(){return null!=this.mastery_points&&this.aboveMastery().length>=this.n?Math.round(n().sum(this.aboveMastery())/this.aboveMastery().length*100)/100:r.t("N/A")}}class h{constructor(e){this.range=e}value(){return this.range.length>0?Math.round(n().sum(this.range)/this.range.length*100)/100:r.t("N/A")}}class p{constructor(e){n().each(["calculation_method","calculation_int","mastery_points","is_individual_outcome"],(t=>this[t]=null!=e.get?e.get(t):e[t]))}weightedAverage(){return new c(this.calculation_int,this.exampleScoreIntegers()).value()}decayingAverage(){return new u(this.calculation_int,this.exampleScoreIntegers().slice(0,7)).value()}exampleScoreIntegers(){return[1,4,2,3,5,3,6,1,4,2,3,5,3,6]}nMastery(){return new d(this.calculation_int,this.mastery_points,this.exampleScoreIntegers()).value()}average(e){return new h(e).value()}present(){const e=ENV.OUTCOMES_NEW_DECAYING_AVERAGE_CALCULATION
let t=this.calculation_method
t=e?"decaying_average"===this.calculation_method?"weighted_average":this.calculation_method:"standard_decaying_average"===this.calculation_method?"decaying_average":this.calculation_method
return this.toJSON()[t]}calculationValuesForIndividualOutcomes(e){let t={}
const i={n_mastery:{calculationIntLabel:r.t("# of times"),calculationIntDescription:r.t("must be between 1 and 10")},latest:{method:r.t("Most Recent Score")},highest:{exampleScores:this.exampleScoreIntegers().join(", "),exampleResult:a.Z.outcomeScore(n().max(this.exampleScoreIntegers()))},average:{method:r.t("Average")}}
t=e?{weighted_average:{method:r.t("Weighted Average - %{recentInt}%/%{remainderInt}%",{recentInt:this.calculation_int,remainderInt:100-this.calculation_int}),calculationIntLabel:r.t("% weighting for last item"),calculationIntDescription:r.t("must be between 1 and 99")},decaying_average:{method:r.t("Decaying Average - %{recentInt}%/%{remainderInt}%",{recentInt:this.calculation_int,remainderInt:100-this.calculation_int}),calculationIntLabel:r.t("% weighting of most recent item"),calculationIntDescription:r.t("must be between 50 and 99")}}:{decaying_average:{method:r.t("Decaying Average - %{recentInt}%/%{remainderInt}%",{recentInt:this.calculation_int,remainderInt:100-this.calculation_int}),calculationIntLabel:r.t("% weighting for last item"),calculationIntDescription:r.t("must be between 1 and 99")}}
return Object.assign(t,i)}calculationValuesForNonIndividualOutcomes(e){let t={}
const i={n_mastery:{calculationIntLabel:r.t("Items: "),calculationIntDescription:r.t("Between 1 and 10")},latest:{method:r.t("Latest Score")},highest:{exampleScores:this.exampleScoreIntegers().slice(0,4).join(", "),exampleResult:a.Z.outcomeScore(n().max(this.exampleScoreIntegers().slice(0,4)))},average:{method:r.t("Average")}}
t=e?{weighted_average:{method:r.t("%{recentInt}/%{remainderInt} Weighted Average",{recentInt:this.calculation_int,remainderInt:100-this.calculation_int}),calculationIntLabel:r.t("Last Item: "),calculationIntDescription:r.t("Between 1% and 99%")},decaying_average:{method:r.t("%{recentInt}/%{remainderInt} Decaying Average",{recentInt:this.calculation_int,remainderInt:100-this.calculation_int}),calculationIntLabel:r.t("Most Recent Item: "),calculationIntDescription:r.t("Between 50% and 99%")}}:{decaying_average:{method:r.t("%{recentInt}/%{remainderInt} Decaying Average",{recentInt:this.calculation_int,remainderInt:100-this.calculation_int}),calculationIntLabel:r.t("Last Item: "),calculationIntDescription:r.t("Between 1% and 99%")}}
return Object.assign(t,i)}toJSON(){const e=ENV.OUTCOMES_NEW_DECAYING_AVERAGE_CALCULATION
const t=this.is_individual_outcome?this.calculationValuesForIndividualOutcomes(e):this.calculationValuesForNonIndividualOutcomes(e)
let i={}
const o={method:t.decaying_average.method,friendlyCalculationMethod:r.t("Decaying Average"),calculationIntLabel:t.decaying_average.calculationIntLabel,calculationIntDescription:t.decaying_average.calculationIntDescription,exampleText:r.t("Most recent result counts as %{calculation_int} of mastery weight, average of all other results count as %{remainder} of weight. If there is only one result, the single score will be returned.",{calculation_int:r.n(this.calculation_int,{percentage:true}),remainder:r.n(100-this.calculation_int,{percentage:true})}),exampleScores:this.exampleScoreIntegers().join(", "),exampleResult:a.Z.outcomeScore(this.weightedAverage()),defaultInt:65,validRange:[1,99]}
i=e?{weighted_average:{method:t.weighted_average.method,friendlyCalculationMethod:r.t("Weighted Average"),calculationIntLabel:t.weighted_average.calculationIntLabel,calculationIntDescription:t.weighted_average.calculationIntDescription,exampleText:r.t("Most recent result counts as %{calculation_int} of mastery weight, average of all other results count as %{remainder} of weight. If there is only one result, the single score will be returned.",{calculation_int:r.n(this.calculation_int,{percentage:true}),remainder:r.n(100-this.calculation_int,{percentage:true})}),exampleScores:this.exampleScoreIntegers().join(", "),exampleResult:a.Z.outcomeScore(this.weightedAverage()),defaultInt:65,validRange:[1,99]},standard_decaying_average:{method:t.decaying_average.method,friendlyCalculationMethod:r.t("Decaying Average"),calculationIntLabel:t.decaying_average.calculationIntLabel,calculationIntDescription:t.decaying_average.calculationIntDescription,exampleText:r.t("Between two assessments, the most recent assessment gets %{calculation_int} weight, and the first gets %{remainder}. For each additional assessment, the sum of the previous score calculations decay by an additional %{remainder}. If there is only one result, the single score will be returned.",{calculation_int:r.n(this.calculation_int,{percentage:true}),remainder:r.n(100-this.calculation_int,{percentage:true})}),exampleScores:this.exampleScoreIntegers().slice(0,7).join(", "),exampleResult:a.Z.outcomeScore(this.decayingAverage()),defaultInt:65,validRange:[50,99]}}:{decaying_average:o}
return Object.assign(i,{n_mastery:{method:r.t({one:"Achieve mastery one time",other:"Achieve mastery %{count} times"},{count:this.calculation_int}),friendlyCalculationMethod:r.t("n Number of Times"),calculationIntLabel:t.n_mastery.calculationIntLabel,calculationIntDescription:t.n_mastery.calculationIntDescription,exampleText:r.t({one:"Must achieve mastery at least one time. Scores above mastery will be averaged to calculate final score.",other:"Must achieve mastery at least %{count} times. Scores above mastery will be averaged to calculate final score."},{count:this.calculation_int}),exampleScores:this.exampleScoreIntegers().join(", "),exampleResult:a.Z.outcomeScore(this.nMastery()),defaultInt:5,validRange:[1,10]},latest:{method:t.latest.method,friendlyCalculationMethod:r.t("Most Recent Score"),exampleText:r.t("Mastery score reflects the most recent graded assignment or quiz."),exampleScores:this.exampleScoreIntegers().slice(0,4).join(", "),exampleResult:a.Z.outcomeScore(n().last(this.exampleScoreIntegers().slice(0,4)))},highest:{method:r.t("Highest Score"),friendlyCalculationMethod:r.t("Highest Score"),exampleText:r.t("Mastery score reflects the highest score of a graded assignment or quiz."),exampleScores:t.highest.exampleScores,exampleResult:t.highest.exampleResult},average:{method:t.average.method,friendlyCalculationMethod:r.t("Average"),exampleText:r.t("Central value in a set of results. Calculated by dividing the sum of all item scores by the number of scores."),exampleWarning:r.t("Average is not a good fit for most outcomes-based or mastery-based learning use cases because students may need time to reach mastery of an outcome and early poorer performance can bring down an average."),exampleScores:this.exampleScoreIntegers().slice(0,7).join(", "),exampleResult:a.Z.outcomeScore(this.average(this.exampleScoreIntegers().slice(0,7)))}})}}},26339:(e,t,i)=>{i.d(t,{Z:()=>Ye})
var o=i(6507)
var n=i.n(o)
var s=i(61323)
var a=i(87155)
var r=i(36202)
var l=i(8746)
var c=i(40291)
var u=i(25683)
var d=i.n(u)
var h=i(4267)
var p=i(31878)
i(42449)
i(5777)
const m=(0,s.useScope)("OutcomeContentBase")
p.Z.preloadRemoteModule()
class _ extends h.Z{static initClass(){this.prototype.tagName="div"
this.prototype.className="wrapper"
this.prototype.events=d().extend({"click .edit_button":"edit","click .cancel_button":"cancel","click .delete_button":"delete","click .move_button":"move","keyup input.outcome_title":"updateTitle"},h.Z.prototype.events)
this.prototype.validations={title(e){if(d().isEmpty(e.title))return m.t("blank_error","Cannot be blank")
if(e.title.length>255)return m.t("length_error","Must be 255 characters or less")}}}isValid(){this.errors={}
const e=this.getFormData()
for(const t in this.validations){let i
const o=this.validations[t];(i=o(e))&&(this.errors[t]=[{message:i}])}return d().isEmpty(this.errors)}initialize(e){this.state=e.state
this._readOnly=e.readOnly
this.on("success",this.success,this)
this.on("fail",this.fail,this)
this.setModelUrl()
if(this.model.isAbbreviated()&&"add"!==this.state){this.state="loading"
this.$el.disableWhileLoading(this.model.fetch({success:()=>{this.state=e.state
return this.render()}}))}return super.initialize(...arguments)}_cleanUpTiny(){const e=this.$el.find('[name="description"]')
p.Z.closeRCE(e)
return p.Z.destroyRCE(e)}submit(e){e.preventDefault()
this.setModelUrl()
this.getTinyMceCode()
if(!this.isValid())return this.showErrors(this.errors)
super.submit(e)
this._cleanUpTiny()
n()(".edit_button").focus()}success(){if("add"===this.state){this.trigger("addSuccess",this.model)
n().flashMessage(m.t("flash.addSuccess","Creation successful"))}else n().flashMessage(m.t("flash.updateSuccess","Update successful"))
this.state="show"
this.render()
n()(".edit_button").focus()
return this}fail(){return n().flashError(m.t("flash.error","An error occurred. Please refresh the page and try again."))}getTinyMceCode(){const e=this.$("textarea")
return e.val(p.Z.callOnRCE(e,"get_code"))}setModelUrl(){return this.model.setUrlTo((()=>{switch(this.state){case"add":return"add"
case"delete":return"delete"
case"move":return"move"
default:return"edit"}})())}getFormData(){return this.$("form").toJSON()}remove(){this.tinymceExists()&&this._cleanUpTiny()
this.$el.hideErrors()
"add"===this.state&&this.model.isNew()&&this.model.destroy()
return super.remove(...arguments)}cancel(e){e.preventDefault()
this.resetModel()
this._cleanUpTiny()
this.$el.hideErrors()
if("add"===this.state){this.$el.empty()
this.model.destroy()
this.state="show"
n()(".add_outcome_link").focus()}else{this.state="show"
this.render()
n()(".edit_button").focus()}return this}edit(e){e.preventDefault()
this.state="edit"
this._modelAttributes=this.model.toJSON()
return this.render()}delete(e){e.preventDefault()
if(!window.confirm(m.t("confirm.delete","Are you sure you want to delete?")))return
this.state="delete"
this.setModelUrl()
return this.$el.disableWhileLoading(this.model.destroy({success:()=>{n().flashMessage(m.t("flash.deleteSuccess","Deletion successful"))
this.trigger("deleteSuccess")
this.remove()
n()(".add_outcome_link").focus()},error:(e,t)=>{t.responseText.match(/Outcome.*cannot be deleted because it is aligned to content/)?n().flashError(m.t("flash.userDeleteError","Outcome Group contains one or more Outcomes that are currently aligned to content.")):n().flashError(m.t("flash.unexpectedDeleteError","Something went wrong. Unable to delete at this time."))}}))}move(e){e.preventDefault()
return this.trigger("move",this.model)}resetModel(){return this.model.set(this._modelAttributes)}readyForm(){return setTimeout((()=>{p.Z.loadNewEditor(this.$("textarea"),{getRenderingTarget(e){const t=n()(e).wrap(`<div id='parent-of-${e.id}'></div>`).get(0)
return t.parentNode}})
return this.$("input:first").focus()}))}readOnly(){return this._readOnly}updateTitle(e){return this.model.set("title",e.currentTarget.value)}tinymceExists(){const e=this.$el.find('[name="description"]').length>0
const t=p.Z.callOnRCE(this.$el.find('[name="description"]'),"exists?")
return e&&t}}_.initClass()
var f=i(40202)
i(89014)
var g=f["default"]
var v=g.template,y=g.templates=g.templates||{}
var b="/work/generated/ui/shared/outcomes/jst/-calculationMethodExample"
y[b]=v((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
n=n||{}
var s,a,r,l="",c=i.helperMissing,u=this.escapeExpression,d="function",h=this
function p(e,t){var o,n,s,a=""
a+='\n  <dt class="example">'+u((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.calculation_method_example"},data:t},n?n.call(e,"warning_aacb8c24","Warning",s):c.call(e,"t","warning_aacb8c24","Warning",s)))+': </dt>\n  <dd class="example">'
if(n=i.exampleWarning)o=n.call(e,{hash:{},data:t})
else{n=e&&e.exampleWarning
o=typeof n===d?n.call(e,{hash:{},data:t}):n}a+=u(o)+"</dd>\n  "
return a}l+='<dl class="dl-horizontal">\n  <dt>'+u((a=i.t||t&&t.t,r={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.calculation_method_example"},data:n},a?a.call(t,"calculation_method_fe281f9","Calculation Method",r):c.call(t,"t","calculation_method_fe281f9","Calculation Method",r)))+":</dt>\n  <dd>"
if(a=i.method)s=a.call(t,{hash:{},data:n})
else{a=t&&t.method
s=typeof a===d?a.call(t,{hash:{},data:n}):a}l+=u(s)+'</dd>\n\n  <dt class="example">'+u((a=i.t||t&&t.t,r={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.calculation_method_example"},data:n},a?a.call(t,"example_84698b7d","Example",r):c.call(t,"t","example_84698b7d","Example",r)))+': </dt>\n  <dd id="calculation_int_example" class="example">'
if(a=i.exampleText)s=a.call(t,{hash:{},data:n})
else{a=t&&t.exampleText
s=typeof a===d?a.call(t,{hash:{},data:n}):a}l+=u(s)+"</dd>\n  \n  "
s=i["if"].call(t,t&&t.exampleWarning,{hash:{},inverse:h.noop,fn:h.program(1,p,n),data:n});(s||0===s)&&(l+=s)
l+='\n\n  <dt class="example">\n    <span aria-hidden="true">'+u((a=i.t||t&&t.t,r={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.calculation_method_example"},data:n},a?a.call(t,"1_item_scores_5512cd03","1- Item scores",r):c.call(t,"t","1_item_scores_5512cd03","1- Item scores",r)))+': </span>\n    <span class="screenreader-only">'+u((a=i.t||t&&t.t,r={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.calculation_method_example"},data:n},a?a.call(t,"example_item_scores_6726c689","Example item scores",r):c.call(t,"t","example_item_scores_6726c689","Example item scores",r)))+': </span>\n  </dt>\n  <dd class="example">'
if(a=i.exampleScores)s=a.call(t,{hash:{},data:n})
else{a=t&&t.exampleScores
s=typeof a===d?a.call(t,{hash:{},data:n}):a}l+=u(s)+'</dd>\n\n  <dt class="example">\n    <span aria-hidden="true">'+u((a=i.t||t&&t.t,r={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.calculation_method_example"},data:n},a?a.call(t,"2_final_score_7b0fd15e","2- Final score",r):c.call(t,"t","2_final_score_7b0fd15e","2- Final score",r)))+': </span>\n    <span class="screenreader-only">'+u((a=i.t||t&&t.t,r={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.calculation_method_example"},data:n},a?a.call(t,"example_final_score_355aff0f","Example final score",r):c.call(t,"t","example_final_score_355aff0f","Example final score",r)))+'</span>\n  </dt>\n  <dd class="example">'+u((a=i.nf||t&&t.nf,r={hash:{format:"outcomeScore"},data:n},a?a.call(t,t&&t.exampleResult,r):c.call(t,"nf",t&&t.exampleResult,r)))+"</dd>\n</dl>\n"
return l}))
g.registerPartial("ui/shared/outcomes/jst/_calculationMethodExample.handlebars",y["/work/generated/ui/shared/outcomes/jst/-calculationMethodExample"])
y[b]
var w=f["default"]
var x=w.template,S=w.templates=w.templates||{}
var E="/work/generated/ui/shared/outcome-content-view/jst/outcomeCalculationMethodForm"
S[E]=x((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
o=this.merge(o,e.partials)
n=n||{}
var s,a,r,l="",c="function",u=this.escapeExpression,d=i.helperMissing,h=this
function p(e,t){var o,n,s=""
s+='\n          <input type="text" name="calculation_int" class="outcomes_narrow_text_input" id="calculation_int" value="'
if(n=i.calculation_int)o=n.call(e,{hash:{},data:t})
else{n=e&&e.calculation_int
o=typeof n===c?n.call(e,{hash:{},data:t}):n}s+=u(o)+'" />\n        '
return s}function m(e,t){var o,n,s=""
s+='\n          <span id="calculation_int">'
if(n=i.calculation_int)o=n.call(e,{hash:{},data:t})
else{n=e&&e.calculation_int
o=typeof n===c?n.call(e,{hash:{},data:t}):n}s+=u(o)+"</span>\n        "
return s}function _(e,t){return"8"}function f(e,t){return"12"}l+='<div class="content-box border border-trbl border-round">\n  <div class="grid-row">\n    <div id="calculation_int_left_side" style="'+u((a=i.hiddenUnlessExists||t&&t.hiddenUnlessExists,r={hash:{},data:n},a?a.call(t,t&&t.calculation_int,r):d.call(t,"hiddenUnlessExists",t&&t.calculation_int,r)))+'"\n      class="col-xs-4 border border-r">\n      <div>\n        <label for="calculation_int" id="calculation_int_label">\n          '
if(a=i.calculationIntLabel)s=a.call(t,{hash:{},data:n})
else{a=t&&t.calculationIntLabel
s=typeof a===c?a.call(t,{hash:{},data:n}):a}l+=u(s)+"\n        </label>\n        "
s=(a=i.ifIncludes||t&&t.ifIncludes,r={hash:{},inverse:h.program(3,m,n),fn:h.program(1,p,n),data:n},a?a.call(t,t&&t.writeStates,t&&t.state,r):d.call(t,"ifIncludes",t&&t.writeStates,t&&t.state,r));(s||0===s)&&(l+=s)
l+='\n      </div>\n      <div>\n        <span class="outcomes-calculation-int-italics">\n          '
if(a=i.calculationIntDescription)s=a.call(t,{hash:{},data:n})
else{a=t&&t.calculationIntDescription
s=typeof a===c?a.call(t,{hash:{},data:n}):a}l+=u(s)+'\n        </span>\n      </div>\n    </div>\n    <div class="col-xs-'
s=(a=i.ifExists||t&&t.ifExists,r={hash:{},inverse:h.program(7,f,n),fn:h.program(5,_,n),data:n},a?a.call(t,t&&t.calculation_int,r):d.call(t,"ifExists",t&&t.calculation_int,r));(s||0===s)&&(l+=s)
l+='">\n      '
s=h.invokePartial(o["ui/shared/outcomes/jst/_calculationMethodExample.handlebars"],"ui/shared/outcomes/jst/_calculationMethodExample.handlebars",t,i,o,n);(s||0===s)&&(l+=s)
l+="\n    </div>\n  </div>\n</div>\n\n"
return l}))
const C=S[E]
var O=i(70265)
class M extends a.ZP.View{static initClass(){this.optionProperty("el")
this.optionProperty("model")
this.optionProperty("state")
this.prototype.template=C
this.prototype.els={"#calculation_int":"$calculation_int"}
this.prototype.events={"blur #calculation_int":"blur","keyup #calculation_int":"keyup"}}afterRender(){if(this.hadFocus){this.$calculation_int.focus().val(this.$calculation_int.val())
this.$calculation_int[0].selectionStart=this.selectionStart}return this.hadFocus=void 0}attach(){return this.model.on("change:calculation_method",this.render,this)}blur(e){this.timeout&&clearTimeout(this.timeout)
return this.change(e)}change(e){const t=parseInt(c.Z.parse(n()(e.target).val()),10)
if(d().isNaN(t))return
this.model.set({calculation_int:t})
return this.render()}keyup(e){this.timeout&&clearTimeout(this.timeout)
this.timeout=setTimeout((()=>this.change(e)),500)}render(){this.hadFocus=!d().isEmpty(this.$calculation_int)&&document.activeElement===this.$calculation_int[0]
this.hadFocus&&(this.selectionStart=document.activeElement.selectionStart)
this.undelegateEvents()
super.render(...arguments)
return this.delegateEvents()}toJSON(){var e
let t
if(ENV.ACCOUNT_LEVEL_MASTERY_SCALES&&null!==(e=ENV.MASTERY_SCALE)&&void 0!==e&&e.outcome_calculation_method){const e=new O.Z(ENV.MASTERY_SCALE.outcome_calculation_method)
t={...ENV.MASTERY_SCALE.outcome_calculation_method,...e.present()}}else t=super.toJSON(...arguments)
return d().extend(t,{state:this.state,writeStates:["add","edit"]})}}M.initClass()
var k=f["default"]
var I=k.template,D=k.templates=k.templates||{}
var T="/work/generated/ui/shared/outcome-content-view/jst/outcome"
D[T]=I((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
n=n||{}
var s,a,r="",l="function",c=this.escapeExpression,u=i.helperMissing,d=this
function h(e,t){var o,n,s=""
s+="\n    <a href='"
if(n=i.html_url)o=n.call(e,{hash:{},data:t})
else{n=e&&e.html_url
o=typeof n===l?n.call(e,{hash:{},data:t}):n}s+=c(o)+"'>"
if(n=i.title)o=n.call(e,{hash:{},data:t})
else{n=e&&e.title
o=typeof n===l?n.call(e,{hash:{},data:t}):n}s+=c(o)+"</a>\n  "
return s}function p(e,t){var o,n,s=""
s+="\n    "
if(n=i.title)o=n.call(e,{hash:{},data:t})
else{n=e&&e.title
o=typeof n===l?n.call(e,{hash:{},data:t}):n}s+=c(o)+"\n  "
return s}function m(e,t){var o,n,s,a=""
a+='\n  <div class="friendly-description">\n    <div class="friendly-description-title">'+c((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},n?n.call(e,"friendly_description_57f7fdde","Friendly Description",s):u.call(e,"t","friendly_description_57f7fdde","Friendly Description",s)))+'</div>\n    <div class="friendly-description-info">'
if(n=i.friendly_description)o=n.call(e,{hash:{},data:t})
else{n=e&&e.friendly_description
o=typeof n===l?n.call(e,{hash:{},data:t}):n}(o||0===o)&&(a+=o)
a+="</div>\n  </div>\n"
return a}function _(e,t){var o,n,s,a=""
a+='\n  <table class="criterion">\n    <thead>\n      <tr>\n        '
o=i.each.call(e,e&&e.ratings,{hash:{},inverse:d.noop,fn:d.program(8,f,t),data:t});(o||0===o)&&(a+=o)
a+='\n        <th class="total" aria-label=\''+c((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},n?n.call(e,"total_points_44d76792","Total Points",s):u.call(e,"t","total_points_44d76792","Total Points",s)))+'\'>\n          <h3 class="total">'+c((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},n?n.call(e,"total_points_44d76792","Total Points",s):u.call(e,"t","total_points_44d76792","Total Points",s)))+"</h3>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        "
o=i.each.call(e,e&&e.ratings,{hash:{},inverse:d.noop,fn:d.program(10,g,t),data:t});(o||0===o)&&(a+=o)
a+='\n        <td class="total">\n          '
o=(n=i.n||e&&e.n,s={hash:{precision:2,strip_insignificant_zeros:true},data:t},n?n.call(e,e&&e.points_possible,s):u.call(e,"n",e&&e.points_possible,s))
a+=c((n=i.t||e&&e.t,s={hash:{n_points_possible_precision_2_st:o,i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},n?n.call(e,"n_points_possible_precision_2_st_points_bc3748df","%{n_points_possible_precision_2_st} Points",s):u.call(e,"t","n_points_possible_precision_2_st_points_bc3748df","%{n_points_possible_precision_2_st} Points",s)))+"\n        </td>\n      </tr>\n    </tbody>\n  </table>\n"
return a}function f(e,t){var o,n,s=""
s+='\n        <th class="rating" aria-label=\''
if(n=i.description)o=n.call(e,{hash:{},data:t})
else{n=e&&e.description
o=typeof n===l?n.call(e,{hash:{},data:t}):n}s+=c(o)+"'>\n          <h3>"
if(n=i.description)o=n.call(e,{hash:{},data:t})
else{n=e&&e.description
o=typeof n===l?n.call(e,{hash:{},data:t}):n}s+=c(o)+"</h3>\n        </th>\n        "
return s}function g(e,t){var o,n,s,a=""
a+='\n        <td class="rating">\n          '
o=(n=i.n||e&&e.n,s={hash:{precision:2,strip_insignificant_zeros:true},data:t},n?n.call(e,e&&e.points,s):u.call(e,"n",e&&e.points,s))
a+=c((n=i.t||e&&e.t,s={hash:{n_points_precision_2_strip_insig:o,i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},n?n.call(e,"n_points_precision_2_strip_insig_points_60ad6f21","%{n_points_precision_2_strip_insig} Points",s):u.call(e,"t","n_points_precision_2_strip_insig_points_60ad6f21","%{n_points_precision_2_strip_insig} Points",s)))+"\n        </td>\n        "
return a}function v(e,t){var o,n,s=""
s+='\n  <label for="outcome_mastery_at">\n    '+c((o=i.t||e&&e.t,n={hash:{i18n_scope:"outcomes.outcome"},data:t},o?o.call(e,"outcomes.outcome.mastery_at_label","Set mastery for any score at or above:",n):u.call(e,"t","outcomes.outcome.mastery_at_label","Set mastery for any score at or above:",n)))+'\n    <input type="text" name="mastery_at" id="outcome_mastery_at" value="60" />\n    %\n  </label>\n'
return s}function y(e,t){var o,n=""
n+="\n  "
o=i["if"].call(e,e&&e.useForScoring,{hash:{},inverse:d.program(17,w,t),fn:d.program(15,b,t),data:t});(o||0===o)&&(n+=o)
n+="\n"
return n}function b(e,t){var o,n,s=""
s+='\n    <label for="outcome_use_for_scoring">\n      <input type="checkbox" id="outcome_use_for_scoring" class="criterion_for_scoring" checked />\n      '+c((o=i.t||e&&e.t,n={hash:{i18n_scope:"outcomes.outcome"},data:t},o?o.call(e,"outcomes.outcome.use_for_scoring","Use this criterion for scoring",n):u.call(e,"t","outcomes.outcome.use_for_scoring","Use this criterion for scoring",n)))+"\n    </label>\n  "
return s}function w(e,t){var o,n=""
n+="\n    "
o=i.unless.call(e,e&&e.hideMasteryScale,{hash:{},inverse:d.noop,fn:d.program(18,x,t),data:t});(o||0===o)&&(n+=o)
n+="\n  "
return n}function x(e,t){var o,n,s,a=""
a+="\n     <p>"
o=(n=i.n||e&&e.n,s={hash:{precision:2,strip_insignificant_zeros:true},data:t},n?n.call(e,e&&e.mastery_points,s):u.call(e,"n",e&&e.mastery_points,s))
a+=c((n=i.t||e&&e.t,s={hash:{n_mastery_points_precision_2_str:o,i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},n?n.call(e,"mastery_n_mastery_points_precision_2_str_points_e0ed1b3b","Mastery: %{n_mastery_points_precision_2_str} Points",s):u.call(e,"t","mastery_n_mastery_points_precision_2_str_points_e0ed1b3b","Mastery: %{n_mastery_points_precision_2_str} Points",s)))+"</p>\n    "
return a}function S(e,t){var o,n,s,a=""
a+='\n  <div id="calculation_method" data-calculation-method="'
if(n=i.calculation_method)o=n.call(e,{hash:{},data:t})
else{n=e&&e.calculation_method
o=typeof n===l?n.call(e,{hash:{},data:t}):n}a+=c(o)+'">\n    '+c((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},n?n.call(e,"calculation_method_fe281f9","Calculation Method",s):u.call(e,"t","calculation_method_fe281f9","Calculation Method",s)))+": "
if(n=i.friendlyCalculationMethod)o=n.call(e,{hash:{},data:t})
else{n=e&&e.friendlyCalculationMethod
o=typeof n===l?n.call(e,{hash:{},data:t}):n}a+=c(o)+'\n  </div>\n\n  <div class="content-box">\n    <div class="grid-row">\n      \x3c!-- Hook for OutcomeCalculationMethodFormView --\x3e\n      <div class="col-xs-12 outcome-calculation-method-form"></div>\n    </div>\n  </div>\n'
return a}function E(e,t){var o,n,s,a=""
a+="\n  "
o=i.unless.call(e,e&&e.hideMasteryScale,{hash:{},inverse:d.noop,fn:d.program(23,C,t),data:t});(o||0===o)&&(a+=o)
a+='\n  <div class="pull-right">\n    <button class="move_button ui-button ui-widget ui-state-default ui-corner-all">\n      <span aria-hidden="true">'+c((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},n?n.call(e,"move_abf00365","Move",s):u.call(e,"t","move_abf00365","Move",s)))+'</span>\n      <span class="screenreader-only">'+c((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},n?n.call(e,"move_outcome_ce497e6c","Move Outcome",s):u.call(e,"t","move_outcome_ce497e6c","Move Outcome",s)))+"</span>\n    </button>\n    "
o=i["if"].call(e,e&&e.can_edit,{hash:{},inverse:d.noop,fn:d.program(26,M,t),data:t});(o||0===o)&&(a+=o)
a+="\n    "
o=i["if"].call(e,e&&e.can_unlink,{hash:{},inverse:d.noop,fn:d.program(28,k,t),data:t});(o||0===o)&&(a+=o)
a+="\n  </div>\n"
return a}function C(e,t){var o,n=""
n+="\n    "
o=i["if"].call(e,e&&e.assessedInContext,{hash:{},inverse:d.noop,fn:d.program(24,O,t),data:t});(o||0===o)&&(n+=o)
n+="\n  "
return n}function O(e,t){var o,n,s=""
s+='\n      <div id="assessed_info_banner" class="alert alert-info outcome-assessed-info-banner ">\n        <span>\n          <span class="outcome-assessed-info-banner-with-mastery-scale">\n            '+c((o=i.t||e&&e.t,n={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},o?o.call(e,"this_outcome_has_been_used_to_assess_a_student_and_a3a48511","This outcome has been used to assess a student and some edits will affect student results.",n):u.call(e,"t","this_outcome_has_been_used_to_assess_a_student_and_a3a48511","This outcome has been used to assess a student and some edits will affect student results.",n)))+"\n          </span>\n        </span>\n      </div>\n    "
return s}function M(e,t){var o,n,s=""
s+='\n      <button class="edit_button ui-button ui-widget ui-state-default ui-corner-all">\n        <span aria-hidden="true">'+c((o=i.t||e&&e.t,n={hash:{i18n_scope:"outcomes.outcome"},data:t},o?o.call(e,"outcomes.outcome.links.edit_outcome","Edit",n):u.call(e,"t","outcomes.outcome.links.edit_outcome","Edit",n)))+'</span>\n        <span class="screenreader-only">'+c((o=i.t||e&&e.t,n={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},o?o.call(e,"edit_outcome_867a0381","Edit Outcome",n):u.call(e,"t","edit_outcome_867a0381","Edit Outcome",n)))+"</span>\n      </button>\n    "
return s}function k(e,t){var o,n,s,a=""
a+='\n      <button class="delete_button ui-button ui-widget ui-state-default ui-corner-all"\n        '
o=i["if"].call(e,e&&e.assessedInContext,{hash:{},inverse:d.noop,fn:d.program(29,I,t),data:t});(o||0===o)&&(a+=o)
a+='>\n        <span aria-hidden="true">'+c((n=i.t||e&&e.t,s={hash:{i18n_scope:"outcomes.outcome"},data:t},n?n.call(e,"outcomes.outcome.links.delete_outcome","Delete",s):u.call(e,"t","outcomes.outcome.links.delete_outcome","Delete",s)))+'</span>\n        <span class="screenreader-only">'+c((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome"},data:t},n?n.call(e,"delete_outcome_cc6546f1","Delete Outcome",s):u.call(e,"t","delete_outcome_cc6546f1","Delete Outcome",s)))+"</span>\n      </button>\n    "
return a}function I(e,t){return" disabled "}r+='<h2 class="screenreader-outcome-title screenreader-only" tabindex="0">\n  '
if(a=i.title)s=a.call(t,{hash:{},data:n})
else{a=t&&t.title
s=typeof a===l?a.call(t,{hash:{},data:n}):a}r+=c(s)+'\n</h2>\n<h2 class="title" role="presentation">\n  <i class="icon-outcomes" aria-hidden="true"></i>\n  '
s=i.unless.call(t,t&&t.doNotRenderTitleLink,{hash:{},inverse:d.program(3,p,n),fn:d.program(1,h,n),data:n});(s||0===s)&&(r+=s)
r+="\n</h2>\n"
s=i["if"].call(t,t&&t.friendly_description,{hash:{},inverse:d.noop,fn:d.program(5,m,n),data:n});(s||0===s)&&(r+=s)
r+='\n<div class="description user_content">\n  '
if(a=i.description)s=a.call(t,{hash:{},data:n})
else{a=t&&t.description
s=typeof a===l?a.call(t,{hash:{},data:n}):a}(s||0===s)&&(r+=s)
r+="\n</div>\n"
s=i.unless.call(t,t&&t.hideMasteryScale,{hash:{},inverse:d.noop,fn:d.program(7,_,n),data:n});(s||0===s)&&(r+=s)
r+="\n\n"
s=i["if"].call(t,t&&t.setQuizMastery,{hash:{},inverse:d.program(14,y,n),fn:d.program(12,v,n),data:n});(s||0===s)&&(r+=s)
r+="\n\n"
s=i.unless.call(t,t&&t.hideMasteryScale,{hash:{},inverse:d.noop,fn:d.program(20,S,n),data:n});(s||0===s)&&(r+=s)
r+="\n\n"
s=i["if"].call(t,t&&t.can_manage,{hash:{},inverse:d.noop,fn:d.program(22,E,n),data:n});(s||0===s)&&(r+=s)
r+="\n"
return r}))
const N=D[T]
var L=f["default"]
var A=L.template,F=L.templates=L.templates||{}
var Z="/work/generated/ui/shared/outcome-content-view/jst/-criterionHeader"
F[Z]=A((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
n=n||{}
var s,a,r,l="",c="function",u=this.escapeExpression,d=i.helperMissing
l+='<th class="rating-header" aria-label=\''
if(a=i.description)s=a.call(t,{hash:{},data:n})
else{a=t&&t.description
s=typeof a===c?a.call(t,{hash:{},data:n}):a}l+=u(s)+"'>\n  <div class='rating-wrap'>\n    <h5>"
if(a=i.description)s=a.call(t,{hash:{},data:n})
else{a=t&&t.description
s=typeof a===c?a.call(t,{hash:{},data:n}):a}l+=u(s)+'</h5>\n    <div class="insert">\n      <a href="#" class="insert_rating" title="'+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.criterion_header"},data:n},a?a.call(t,"outcomes.criterion_header.insert_criterion_rating","Insert criterion rating",r):d.call(t,"t","outcomes.criterion_header.insert_criterion_rating","Insert criterion rating",r)))+'" tabindex=0 role=button aria-label="'+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.criterion_header"},data:n},a?a.call(t,"outcomes.criterion_header.insert_criterion_rating","Insert criterion rating",r):d.call(t,"t","outcomes.criterion_header.insert_criterion_rating","Insert criterion rating",r)))+'">\n        '+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.criterion_header"},data:n},a?a.call(t,"outcomes.criterion_header.insert_rating","Insert",r):d.call(t,"t","outcomes.criterion_header.insert_rating","Insert",r)))+'\n        <span class="arrow-icon"></span>\n      </a>\n    </div>\n  </div>\n</th>\n'
return l}))
L.registerPartial("ui/shared/outcome-content-view/jst/_criterionHeader.handlebars",F["/work/generated/ui/shared/outcome-content-view/jst/-criterionHeader"])
const $=F[Z]
var P=f["default"]
var R=P.template,V=P.templates=P.templates||{}
var G="/work/generated/ui/shared/outcome-content-view/jst/-criterion"
V[G]=R((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
n=n||{}
var s,a,r,l="",c=i.helperMissing,u=this.escapeExpression,d="function"
l+='<td class="rating">\n  <div class="rating-wrap">\n    <div class="show" aria-expanded="true">\n      <span class="points">'+u((a=i.n||t&&t.n,r={hash:{precision:2,strip_insignificant_zeros:true},data:n},a?a.call(t,t&&t.points,r):c.call(t,"n",t&&t.points,r)))+"</span> "+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.criterion"},data:n},a?a.call(t,"outcomes.criterion.points","Points",r):c.call(t,"t","outcomes.criterion.points","Points",r)))+'\n      <a\n        href="#"\n        class="edit_rating active"\n        title=\''+u((a=i.t||t&&t.t,r={hash:{description:t&&t.description,i18n_scope:"outcomes.criterion"},data:n},a?a.call(t,"outcomes.criterion.edit_criterion_rating_title",'Edit "%{description}" criterion rating',r):c.call(t,"t","outcomes.criterion.edit_criterion_rating_title",'Edit "%{description}" criterion rating',r)))+"'\n        aria-label='"+u((a=i.t||t&&t.t,r={hash:{description:t&&t.description,i18n_scope:"outcomes.criterion"},data:n},a?a.call(t,"outcomes.criterion.edit_criterion_rating_title",'Edit "%{description}" criterion rating',r):c.call(t,"t","outcomes.criterion.edit_criterion_rating_title",'Edit "%{description}" criterion rating',r)))+"'\n        role=button\n        tabindex=0\n        aria-controls=\"edit_rating_"
if(a=i._index)s=a.call(t,{hash:{},data:n})
else{a=t&&t._index
s=typeof a===d?a.call(t,{hash:{},data:n}):a}l+=u(s)+'"><i class="icon-edit"></i></a>\n    </div>\n    <div\n      class="edit"\n      id="edit_rating_'
if(a=i._index)s=a.call(t,{hash:{},data:n})
else{a=t&&t._index
s=typeof a===d?a.call(t,{hash:{},data:n}):a}l+=u(s)+'"\n      role=region\n      aria-expanded="false"\n      tabindex=-1\n    >\n      <div class="row-fluid" class="outcomes-edit-row">\n        <div class="span7">\n          <input type="text" name="ratings['
if(a=i._index)s=a.call(t,{hash:{},data:n})
else{a=t&&t._index
s=typeof a===d?a.call(t,{hash:{},data:n}):a}l+=u(s)+'][description]" class="outcome_rating_description" value="'
if(a=i.description)s=a.call(t,{hash:{},data:n})
else{a=t&&t.description
s=typeof a===d?a.call(t,{hash:{},data:n}):a}l+=u(s)+'" aria-label="'+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.criterion"},data:n},a?a.call(t,"outcomes.criterion.rating_description","Criterion rating description",r):c.call(t,"t","outcomes.criterion.rating_description","Criterion rating description",r)))+'">\n        </div>\n        <div class="span4 offset1">\n          <input type="text" name="ratings['
if(a=i._index)s=a.call(t,{hash:{},data:n})
else{a=t&&t._index
s=typeof a===d?a.call(t,{hash:{},data:n}):a}l+=u(s)+'][points]" style="width: 20px;" class="outcome_rating_points" value="'+u((a=i.n||t&&t.n,r={hash:{precision:2,strip_insignificant_zeros:true},data:n},a?a.call(t,t&&t.points,r):c.call(t,"n",t&&t.points,r)))+'" aria-label="'+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.criterion"},data:n},a?a.call(t,"outcomes.criterion.criterion_rating_points","Criterion rating points",r):c.call(t,"t","outcomes.criterion.criterion_rating_points","Criterion rating points",r)))+'"> <span class="outcomes-points-label">'+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.criterion"},data:n},a?a.call(t,"outcomes.criterion.pts","pts",r):c.call(t,"t","outcomes.criterion.pts","pts",r)))+'</span>\n        </div>\n      </div>\n\n      <div class="buttons row-fluid">\n        <div class="span12">\n          <div class="button-container">\n            <button\n              class="btn btn-small delete_rating_link"\n              type="button"\n            >'+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.criterion"},data:n},a?a.call(t,"outcomes.criterion.delete_criterion","Delete",r):c.call(t,"t","outcomes.criterion.delete_criterion","Delete",r)))+'</button>\n            <button\n              class="btn btn-small btn-primary save_rating_link"\n              aria-controls="edit_rating_'
if(a=i._index)s=a.call(t,{hash:{},data:n})
else{a=t&&t._index
s=typeof a===d?a.call(t,{hash:{},data:n}):a}l+=u(s)+'"\n              type="button"\n            >'+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.criterion"},data:n},a?a.call(t,"outcomes.criterion.close_rating","Ok",r):c.call(t,"t","outcomes.criterion.close_rating","Ok",r)))+"</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</td>\n"
return l}))
P.registerPartial("ui/shared/outcome-content-view/jst/_criterion.handlebars",V["/work/generated/ui/shared/outcome-content-view/jst/-criterion"])
const U=V[G]
var z=f["default"]
var W=z.template,j=z.templates=z.templates||{}
var J="/work/generated/ui/shared/outcome-content-view/jst/outcomeForm"
j[J]=W((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
o=this.merge(o,e.partials)
n=n||{}
var s,a,r,l="",c=this,u="function",d=this.escapeExpression,h=i.helperMissing
function p(e,t){var o,n,s,a=""
a+='\n    <label>\n      <div style="display: flex">\n        <div id=\'criterion_rating_label\' style="margin-top: 0.65rem">'+d((n=i.t||e&&e.t,s={hash:{i18n_scope:"outcomes.outcome_form"},data:t},n?n.call(e,"outcomes.outcome_form.criterion","Criterion ratings",s):h.call(e,"t","outcomes.outcome_form.criterion","Criterion ratings",s)))+':</div>\n        <div id="react-info-link" />\n      </div>\n    </label>\n    <table class="criterion" aria-labelledby=\'criterion_rating_label\'>\n      <thead>\n        <tr>\n          '
o=(n=i.eachWithIndex||e&&e.eachWithIndex,s={hash:{},inverse:c.noop,fn:c.program(2,m,t),data:t},n?n.call(e,e&&e.ratings,s):h.call(e,"eachWithIndex",e&&e.ratings,s));(o||0===o)&&(a+=o)
a+='\n          <th class="total" aria-label=\''+d((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome_form"},data:t},n?n.call(e,"total_points_44d76792","Total Points",s):h.call(e,"t","total_points_44d76792","Total Points",s)))+'\'>\n            <h5 class="total">'+d((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome_form"},data:t},n?n.call(e,"total_points_44d76792","Total Points",s):h.call(e,"t","total_points_44d76792","Total Points",s)))+"</h5>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          "
o=(n=i.eachWithIndex||e&&e.eachWithIndex,s={hash:{},inverse:c.noop,fn:c.program(4,_,t),data:t},n?n.call(e,e&&e.ratings,s):h.call(e,"eachWithIndex",e&&e.ratings,s));(o||0===o)&&(a+=o)
a+='\n        <td class="total">\n          <div class="points_possible">\n            '
o=(n=i.n||e&&e.n,s={hash:{precision:2,strip_insignificant_zeros:true},data:t},n?n.call(e,e&&e.points_possible,s):h.call(e,"n",e&&e.points_possible,s))
a+=d((n=i.t||e&&e.t,s={hash:{n_points_possible_precision_2_st:o,i18n_inferred_key:true,i18n_scope:"outcomes.outcome_form"},data:t},n?n.call(e,"n_points_possible_precision_2_st_points_bc3748df","%{n_points_possible_precision_2_st} Points",s):h.call(e,"t","n_points_possible_precision_2_st_points_bc3748df","%{n_points_possible_precision_2_st} Points",s)))+'\n          </div>\n        </td>\n        </tr>\n      </tbody>\n    </table>\n    <div>\n      <label for="mastery_points" style="display: inline">'+d((n=i.t||e&&e.t,s={hash:{i18n_scope:"outcomes.outcome_form"},data:t},n?n.call(e,"outcomes.outcome_form.mastery","Mastery at",s):h.call(e,"t","outcomes.outcome_form.mastery","Mastery at",s)))+':</label>\n      <input type="text" name="mastery_points" style="width: 20px;" class="mastery_points" id="mastery_points" value="'+d((n=i.n||e&&e.n,s={hash:{precision:2,strip_insignificant_zeros:true},data:t},n?n.call(e,e&&e.mastery_points,s):h.call(e,"n",e&&e.mastery_points,s)))+'">\n    </div>\n    <div>\n      <label for="calculation_method" style="display: inline">'+d((n=i.t||e&&e.t,s={hash:{i18n_scope:"outcomes.outcome_form"},data:t},n?n.call(e,"outcomes.outcome_form.calculation_method","Calculation Method",s):h.call(e,"t","outcomes.outcome_form.calculation_method","Calculation Method",s)))+':</label>\n      <select name="calculation_method" class="calculation_method" id="calculation_method" data-calculation-method="'
if(n=i.calculation_method)o=n.call(e,{hash:{},data:t})
else{n=e&&e.calculation_method
o=typeof n===u?n.call(e,{hash:{},data:t}):n}a+=d(o)+'" value="'
if(n=i.calculation_method)o=n.call(e,{hash:{},data:t})
else{n=e&&e.calculation_method
o=typeof n===u?n.call(e,{hash:{},data:t}):n}a+=d(o)+'">\n        '
o=i.each.call(e,e&&e.calculationMethods,{hash:{},inverse:c.noop,fn:c.programWithDepth(6,f,t,e),data:t});(o||0===o)&&(a+=o)
a+='\n      </select>\n    </div>\n    <div class="content-box">\n      <div class="grid-row">\n        \x3c!-- Hook for OutcomeCalculationMethodFormView --\x3e\n        <div class="col-xs-12 outcome-calculation-method-form"></div>\n      </div>\n    </div>\n  '
return a}function m(e,t){var n,s=""
s+="\n            "
n=c.invokePartial(o["ui/shared/outcome-content-view/jst/_criterionHeader.handlebars"],"ui/shared/outcome-content-view/jst/_criterionHeader.handlebars",e,i,o,t);(n||0===n)&&(s+=n)
s+="\n          "
return s}function _(e,t){var n,s=""
s+="\n            "
n=c.invokePartial(o["ui/shared/outcome-content-view/jst/_criterion.handlebars"],"ui/shared/outcome-content-view/jst/_criterion.handlebars",e,i,o,t);(n||0===n)&&(s+=n)
s+="\n          "
return s}function f(e,t,o){var n,s,a,r=""
r+='\n          <option value="'+d((n=null==t||false===t?t:t.key,typeof n===u?n.apply(e):n))+'" '+d((s=i.selectedIf||o&&o.selectedIf,a={hash:{},data:t},s?s.call(e,null==t||false===t?t:t.key,o&&o.calculation_method,a):h.call(e,"selectedIf",null==t||false===t?t:t.key,o&&o.calculation_method,a)))+">\n            "
if(s=i.friendlyCalculationMethod)n=s.call(e,{hash:{},data:t})
else{s=e&&e.friendlyCalculationMethod
n=typeof s===u?s.call(e,{hash:{},data:t}):s}r+=d(n)+"\n          </option>\n        "
return r}l+='<form action="'
if(a=i.url)s=a.call(t,{hash:{},data:n})
else{a=t&&t.url
s=typeof a===u?a.call(t,{hash:{},data:n}):a}l+=d(s)+'" class="learning_outcome" method="post">\n\n  <label class="span3" for="title">'+d((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.outcome_form"},data:n},a?a.call(t,"outcomes.outcome_form.title","Name this outcome",r):h.call(t,"t","outcomes.outcome_form.title","Name this outcome",r)))+':</label>\n  <input class="outcome_title span3" name="title" id=title size="50" type="text" value="'
if(a=i.title)s=a.call(t,{hash:{},data:n})
else{a=t&&t.title
s=typeof a===u?a.call(t,{hash:{},data:n}):a}l+=d(s)+'" placeholder="'+d((a=i.t||t&&t.t,r={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome_form"},data:n},a?a.call(t,"new_outcome_7fba8c7d","New Outcome",r):h.call(t,"t","new_outcome_7fba8c7d","New Outcome",r)))+'">\n\n  <label class="span3" for="display_name">'+d((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.outcome_form"},data:n},a?a.call(t,"outcomes.outcome_form.display_name","Friendly name (optional)",r):h.call(t,"t","outcomes.outcome_form.display_name","Friendly name (optional)",r)))+':</label>\n  <input class="outcome_display_name span3" name="display_name" id=display_name size="50" type="text" value="'
if(a=i.display_name)s=a.call(t,{hash:{},data:n})
else{a=t&&t.display_name
s=typeof a===u?a.call(t,{hash:{},data:n}):a}l+=d(s)+'">\n\n  <label for="description">'+d((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.outcome_form"},data:n},a?a.call(t,"outcomes.outcome_form.description","Describe this outcome",r):h.call(t,"t","outcomes.outcome_form.description","Describe this outcome",r)))+':</label>\n\n  <textarea cols="40" name="description" id=description rows="20" style="display: none; width: 100%; height: 150px;">'
if(a=i.description)s=a.call(t,{hash:{},data:n})
else{a=t&&t.description
s=typeof a===u?a.call(t,{hash:{},data:n}):a}l+=d(s)+"</textarea>\n\n  "
s=i.unless.call(t,t&&t.hideMasteryScale,{hash:{},inverse:c.noop,fn:c.program(1,p,n),data:n});(s||0===s)&&(l+=s)
l+='\n  <div class="align-right">\n    <button type="button" class="btn cancel_button">'+d((a=i.t||t&&t.t,r={hash:{i18n_scope:"buttons",i18n_used_in:"outcomes.outcome_form"},data:n},a?a.call(t,"buttons.cancel","Cancel",r):h.call(t,"t","buttons.cancel","Cancel",r)))+'</button>\n    <button type="submit" class="btn btn-primary submit_button">'+d((a=i.t||t&&t.t,r={hash:{i18n_scope:"buttons",i18n_used_in:"outcomes.outcome_form"},data:n},a?a.call(t,"buttons.save","Save",r):h.call(t,"t","buttons.save","Save",r)))+"</button>\n  </div>\n</form>\n"
return l}))
const Y=j[J]
var B=i(63056)
var H=i(67294)
var q=i(73935)
var Q=i(15809)
var K=i(60564)
const X=(0,s.useScope)("confirmOutcomeEditModal")
const ee=e=>{let{changed:t,hasUpdateableRubrics:i}=e
return t&&i}
const te=e=>{let{assessed:t,changed:i,modifiedFields:o}=e
return i&&t&&(o.masteryPoints||o.scoringMethod)}
function ie(e){if(!ee(e)&&!te(e)){setTimeout(e.onConfirm)
return}const t=document.createElement("div")
t.setAttribute("class","confirm-outcome-edit-modal-container")
document.body.appendChild(t)
function i(e){e&&e.show()}q.render(H.createElement(oe,Object.assign({},e,{parent:()=>t,ref:i})),t)}class oe extends H.Component{constructor(){super(...arguments)
this.state={show:false}
this.onConfirm=()=>{setTimeout(this.props.onConfirm)
this.hide()}
this.onCancel=()=>{this.hide()}}show(){this.setState({show:true})}hide(){this.setState({show:false},(()=>{const e=this.props.parent?this.props.parent():null
e&&q.unmountComponentAtNode(e)}))}render(){const{assessed:e,changed:t,hasUpdateableRubrics:i,modifiedFields:o}=this.props
return(0,B.Z)(K.Z,{label:X.t("Confirm Edit Outcome"),open:this.state.show,onDismiss:this.onCancel,size:"small"},void 0,(0,B.Z)(K.Z.Body,{},void 0,(0,B.Z)("div",{},void 0,(0,B.Z)("ul",{},void 0,ee({changed:t,hasUpdateableRubrics:i})&&(0,B.Z)("li",{},void 0,X.t("This will update all rubrics using this outcome that have not yet been assessed")),te({assessed:e,changed:t,modifiedFields:o})&&(0,B.Z)("li",{},void 0,X.t("Youve updated the scoring criteria; this will affect all students previously assessed using this outcome"))))),(0,B.Z)(K.Z.Footer,{},void 0,(0,B.Z)(Q.z,{onClick:this.onCancel,id:"cancel-outcome-edit-modal"},void 0,X.t("Cancel")),"",(0,B.Z)(Q.z,{onClick:this.onConfirm,id:"confirm-outcome-edit-modal",color:"primary"},void 0,X.t("Save"))))}}var ne=i(85779)
var se=i(16303)
var ae=i(34651)
var re=i(35498)
var le=i(93872)
var ce=i(60124)
var ue,de
const he=(0,s.useScope)("outcomesCriterionInfo")
const pe=()=>he.t("\nLearning outcomes can be included in assignment rubrics as an easy way to assess\nmastery of outcomes aligned to specific assignments.  When you define a learning\noutcome, you should also define a criterion that can be used when building\nassignment rubrics.  Define as many rubric columns as you need, and specify a\npoint threshold that will be used to define mastery of this outcome.\n")
class me extends H.Component{constructor(e){super(e)
this.handleButtonClick=()=>{this.setState((e=>({open:!e.open})))}
this.state={open:false}}renderCloseButton(){return(0,B.Z)(ne.P,{placement:"end",offset:"medium",onClick:this.handleButtonClick,screenReaderLabel:he.t("Close")})}renderModal(){if(this.state.open)return(0,B.Z)(ce.u_,{as:"form",open:this.state.open,onDismiss:()=>{this.setState({open:false})},size:"medium",label:he.t("Criterion Ratings"),shouldCloseOnDocumentClick:true},void 0,(0,B.Z)(ce.u_.Header,{},void 0,this.renderCloseButton(),(0,B.Z)(re.X,{},void 0,he.t("Criterion Ratings"))),(0,B.Z)(ce.u_.Body,{},void 0,(0,B.Z)(ae.x,{lineHeight:"double"},void 0,pe())))}render(){return(0,B.Z)("span",{},void 0,(0,B.Z)(se.h,{renderIcon:ue||(ue=(0,B.Z)(le.y,{})),withBackground:false,withBorder:false,onClick:this.handleButtonClick,screenReaderLabel:he.t("More Information About Ratings")}),this.renderModal())}}const _e=e=>{q.render(de||(de=(0,B.Z)(me,{})),e)}
i(60314)
const fe=(0,s.useScope)("OutcomeView")
class ge extends _{static initClass(){this.child("calculationMethodFormView","div.outcome-calculation-method-form")
this.prototype.events=d().extend({"click .edit_rating":"editRating","click .delete_rating_link":"deleteRating","click .save_rating_link":"saveRating","click .insert_rating":"insertRating","change .calculation_method":"updateCalcMethod","keyup .mastery_points":"changeMasteryPoints"},_.prototype.events)
this.prototype.validations=d().extend({display_name(e){if(e.display_name.length>255)return fe.t("length_error","Must be 255 characters or less")},mastery_points(e){if(!ENV.ACCOUNT_LEVEL_MASTERY_SCALES&&(d().isNaN(e.mastery_points)||e.mastery_points<0))return fe.t("mastery_error","Must be greater than or equal to 0")}},_.prototype.validations)}initialize(e){let{setQuizMastery:t,useForScoring:i,inFindDialog:o}=e
this.setQuizMastery=t
this.useForScoring=i
this.inFindDialog=o
this.calculationMethodFormView=new M({model:this.model})
this.originalConfirmableValues=this.getFormData()
super.initialize(...arguments)}submit(e){null!=e&&e.preventDefault()
const t=this.getFormData()
return ie({changed:!d().isEqual(t,this.originalConfirmableValues),assessed:this.model.get("assessed"),hasUpdateableRubrics:this.model.get("has_updateable_rubrics"),modifiedFields:this.getModifiedFields(t),onConfirm:t=>super.submit(e)})}getModifiedFields(e){if(ENV.ACCOUNT_LEVEL_MASTERY_SCALES)return{}
return{masteryPoints:e.mastery_points!==c.Z.parse(this.originalConfirmableValues.mastery_points),scoringMethod:!this.scoringMethodsEqual(e,this.originalConfirmableValues)}}scoringMethodsEqual(e,t){if(e.calculation_method!==t.calculation_method)return false
if(["highest","latest"].includes(e.calculation_method))return true
return c.Z.parse(e.calculation_int)===c.Z.parse(t.calculation_int)}edit(e){super.edit(e)
this.originalConfirmableValues=this.getFormData()
return setTimeout((()=>this.originalConfirmableValues=this.getFormData()),50)}getFormData(){const e=super.getFormData()
if(ENV.ACCOUNT_LEVEL_MASTERY_SCALES){delete e.mastery_points
delete e.ratings}else{e.mastery_points=c.Z.parse(e.mastery_points)
e.ratings=d().map(e.ratings,(e=>d().extend(e,{points:c.Z.parse(e.points)})));["highest","latest"].includes(e.calculation_method)?delete e.calculation_int:e.calculation_int=parseInt(c.Z.parse(e.calculation_int),10)}return e}editRating(e){e.preventDefault()
const t=n()(e.currentTarget).closest(".rating").index()
const i=n()(`.criterion thead tr > th:nth-child(${t+1})`)
const o=n()(e.currentTarget).parents(".show:first")
const s=o.next()
o.attr("aria-expanded","false").hide()
s.attr("aria-expanded","true").show()
i.find("h5").attr("aria-expanded","false").hide()
return s.find(".outcome_rating_description").focus()}deleteRating(e){e.preventDefault()
if(this.$(".rating").length>1){const t=n()(e.currentTarget)
const i=t.closest(".rating").index()
const o=n()(`.criterion thead tr > th:nth-child(${i+1})`)
let s=t.closest(".rating").prev().find(".insert_rating")
0===s.length&&(s=t.closest(".rating").next().find(".edit_rating"))
o.remove()
t.closest("td").remove()
s.focus()
return this.updateRatings()}}saveRating(e){e.preventDefault()
const t=n()(e.currentTarget).closest(".rating").index()
const i=n()(`.criterion thead tr > th:nth-child(${t+1})`)
const o=n()(e.currentTarget).parents(".edit:first")
const s=o.prev()
i.find("h5").text(o.find("input.outcome_rating_description").val())
let a=c.Z.parse(o.find("input.outcome_rating_points").val())
a=d().isNaN(a)?0:fe.n(a,{precision:2,strip_insignificant_zeros:true})
s.find(".points").text(a)
o.attr("aria-expanded","false").hide()
s.attr("aria-expanded","true").show()
i.find("h5").attr("aria-expanded","true").show()
s.find(".edit_rating").focus()
return this.updateRatings()}insertRating(e){e.preventDefault()
const t=n()(U({description:"",points:"",_index:99}))
const i=n()(e.currentTarget).closest(".rating-header").index()
const o=n()($({description:"",_index:99}))
const s=n()(".criterion tbody tr")
n()(e.currentTarget).closest(".rating-header").after(o)
s.find(`> td:nth-child(${i+1})`).after(t)
t.find(".show").hide().next().show(200)
o.hide().show(200)
t.find(".edit input:first").focus()
return this.updateRatings()}updateCalcMethod(e){null!=e&&e.preventDefault()
return this.model.set({calculation_method:n()(e.target).val()})}changeMasteryPoints(e){this.timeout&&clearTimeout(this.timeout)
return this.timeout=setTimeout((()=>{const t=c.Z.parse(n()(e.target).val())
if(d().isNaN(t))return
if(t>=0&&t<=this.model.get("points_possible")){this.model.set({mastery_points:t})
this.calculationMethodFormView&&this.calculationMethodFormView.render()}}),500)}updateRatings(){let e=0
const t=this.$(".rating")
for(let i=0;i<t.length;i++){const o=t[i]
const s=n()(o).find(".outcome_rating_points").val()||0
e=d().max([e,c.Z.parse(s)])
for(const e of Array.from(n()(o).find("input")))n()(e).attr("name",e.name.replace(/\[[0-9]+\]/,`[${i}]`))}const i=this.$(".points_possible")
i.html(n().raw(fe.t("%{points_possible} Points",{points_possible:fe.n(e,{precision:2,strip_insignificant_zeros:true})})))
return this.model.set({points_possible:e})}screenreaderTitleFocus(){return this.$(".screenreader-outcome-title").focus()}render(){const e=this.model.present()
e.html_url=`${ENV.CONTEXT_URL_ROOT}/outcomes/${e.id}`
this.calculationMethodFormView.state=this.state
switch(this.state){case"edit":case"add":this.$el.html(Y(d().extend(e,{calculationMethods:this.model.calculationMethods(),hideMasteryScale:ENV.ACCOUNT_LEVEL_MASTERY_SCALES})))
ENV.ACCOUNT_LEVEL_MASTERY_SCALES||_e(this.$el.find("#react-info-link")[0])
this.readyForm()
break
case"loading":this.$el.empty()
break
default:{e.points_possible||(e.points_possible=0)
e.mastery_points||(e.mastery_points=0)
if(ENV.ACCOUNT_LEVEL_MASTERY_SCALES){var t,i
if(null!==(t=ENV.MASTERY_SCALE)&&void 0!==t&&t.outcome_proficiency){e.ratings=ENV.MASTERY_SCALE.outcome_proficiency.ratings
e.mastery_points=e.ratings.find((e=>e.mastery)).points
e.points_possible=Math.max(...e.ratings.map((e=>e.points)))}if(null!==(i=ENV.MASTERY_SCALE)&&void 0!==i&&i.outcome_calculation_method){const t=new O.Z(ENV.MASTERY_SCALE.outcome_calculation_method)
d().extend(e,ENV.MASTERY_SCALE.outcome_calculation_method,t.present())}}const o=!this.readOnly()&&this.model.canManage()
const n=o&&this.model.isNative()
const s=o&&this.model.outcomeLink.can_unlink
this.$el.html(N(d().extend(e,{can_manage:o,can_edit:n,can_unlink:s,setQuizMastery:this.setQuizMastery,useForScoring:this.useForScoring,doNotRenderTitleLink:ENV.IS_LARGE_ROSTER||this.inFindDialog,hideMasteryScale:ENV.ACCOUNT_LEVEL_MASTERY_SCALES&&!this.useForScoring&&!this.setQuizMastery,assessedInContext:!this.readOnly()&&(this.model.outcomeLink.assessed||this.model.isNative()&&this.model.get("assessed"))})))}}this.$("input:first").focus()
this.screenreaderTitleFocus()
this._afterRender()
return this}}ge.initClass()
var ve=f["default"]
var ye=ve.template,be=ve.templates=ve.templates||{}
var we="/work/generated/ui/shared/outcome-content-view/jst/outcomeGroup"
be[we]=ye((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
n=n||{}
var s,a,r="",l=i.helperMissing,c=this.escapeExpression,u="function",d=this
function h(e,t){var o,n,s=""
s+='\n  <a href="#" style="float:left" class="move_button move_group_button ui-button ui-widget ui-state-default ui-corner-all" role="button">\n    <span aria-hidden="true">'+c((o=i.t||e&&e.t,n={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome_group"},data:t},o?o.call(e,"move_abf00365","Move",n):l.call(e,"t","move_abf00365","Move",n)))+'</span>\n    <span class="screenreader-only">'+c((o=i.t||e&&e.t,n={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome_group"},data:t},o?o.call(e,"move_outcome_group_cfa1a505","Move Outcome Group",n):l.call(e,"t","move_outcome_group_cfa1a505","Move Outcome Group",n)))+'</span>\n  </a>\n  <a href="#" style="float:left" class="edit_button edit_group_button ui-button ui-widget ui-state-default ui-corner-all" role="button">\n    <span aria-hidden="true">'+c((o=i.t||e&&e.t,n={hash:{i18n_scope:"outcomes.outcome_group"},data:t},o?o.call(e,"outcomes.outcome_group.links.edit_outcome_group","Edit",n):l.call(e,"t","outcomes.outcome_group.links.edit_outcome_group","Edit",n)))+'</span>\n    <span class="screenreader-only">'+c((o=i.t||e&&e.t,n={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome_group"},data:t},o?o.call(e,"edit_outcome_group_f82e0210","Edit Outcome Group",n):l.call(e,"t","edit_outcome_group_f82e0210","Edit Outcome Group",n)))+'</span>\n  </a>\n  <a href="#" style="float:left" class="delete_button delete_group_button ui-button ui-widget ui-state-default ui-corner-all" role="button">\n    <span aria-hidden="true">'+c((o=i.t||e&&e.t,n={hash:{i18n_scope:"outcomes.outcome_group"},data:t},o?o.call(e,"outcomes.outcome_group.links.delete_outcome_group","Delete",n):l.call(e,"t","outcomes.outcome_group.links.delete_outcome_group","Delete",n)))+'</span>\n    <span class="screenreader-only">'+c((o=i.t||e&&e.t,n={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome_group"},data:t},o?o.call(e,"delete_outcome_group_6b399d34","Delete Outcome Group",n):l.call(e,"t","delete_outcome_group_6b399d34","Delete Outcome Group",n)))+"</span>\n  </a>\n"
return s}r+='<h2 class="title">\n  <i class="icon-folder"></i>\n  '
if(a=i.title)s=a.call(t,{hash:{},data:n})
else{a=t&&t.title
s=typeof a===u?a.call(t,{hash:{},data:n}):a}r+=c(s)+'\n</h2>\n<div class="description">\n  '
if(a=i.description)s=a.call(t,{hash:{},data:n})
else{a=t&&t.description
s=typeof a===u?a.call(t,{hash:{},data:n}):a}(s||0===s)&&(r+=s)
r+="\n</div>\n\n"
s=i["if"].call(t,t&&t.canManage,{hash:{},inverse:d.noop,fn:d.program(1,h,n),data:n});(s||0===s)&&(r+=s)
r+="\n"
return r}))
const xe=be[we]
var Se=f["default"]
var Ee=Se.template,Ce=Se.templates=Se.templates||{}
var Oe="/work/generated/ui/shared/outcome-content-view/jst/outcomeGroupForm"
Ce[Oe]=Ee((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
n=n||{}
var s,a,r,l="",c="function",u=this.escapeExpression,d=i.helperMissing
l+='<form action="'
if(a=i.url)s=a.call(t,{hash:{},data:n})
else{a=t&&t.url
s=typeof a===c?a.call(t,{hash:{},data:n}):a}l+=u(s)+'" class="outcome_group" method="post">\n  <label for="outcome_group_title">'+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.outcome_group_form"},data:n},a?a.call(t,"outcomes.outcome_group_form.title","Name this group",r):d.call(t,"t","outcomes.outcome_group_form.title","Name this group",r)))+':</label>\n  <input id="outcome_group_title" class="outcome_title" name="title" size="50" type="text" placeholder="'+u((a=i.t||t&&t.t,r={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.outcome_group_form"},data:n},a?a.call(t,"new_outcome_group_af59f145","New Outcome Group",r):d.call(t,"t","new_outcome_group_af59f145","New Outcome Group",r)))+'" value="'
if(a=i.title)s=a.call(t,{hash:{},data:n})
else{a=t&&t.title
s=typeof a===c?a.call(t,{hash:{},data:n}):a}l+=u(s)+'">\n  <label for="outcome_group_description">'+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"outcomes.outcome_group_form"},data:n},a?a.call(t,"outcomes.outcome_group_form.group_description","Describe this group",r):d.call(t,"t","outcomes.outcome_group_form.group_description","Describe this group",r)))+':</label>\n  <textarea cols="40" id="outcome_group_description" name="description" rows="20" style="width: 100%; height: 150px;">'
if(a=i.description)s=a.call(t,{hash:{},data:n})
else{a=t&&t.description
s=typeof a===c?a.call(t,{hash:{},data:n}):a}l+=u(s)+'</textarea>\n  <div class="button-container pull-right">\n    <button type="button" class="btn cancel_button">'+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"buttons",i18n_used_in:"outcomes.outcome_group_form"},data:n},a?a.call(t,"buttons.cancel","Cancel",r):d.call(t,"t","buttons.cancel","Cancel",r)))+'</button>\n    <button type="submit" class="btn btn-primary submit_button">'+u((a=i.t||t&&t.t,r={hash:{i18n_scope:"buttons",i18n_used_in:"outcomes.outcome_group_form"},data:n},a?a.call(t,"buttons.save","Save",r):d.call(t,"t","buttons.save","Save",r)))+"</button>\n  </div>\n</form>\n"
return l}))
const Me=Ce[Oe]
class ke extends _{render(){const e=this.model.toJSON()
switch(this.state){case"edit":case"add":this.$el.html(Me(e))
this.readyForm()
break
case"loading":this.$el.empty()
break
default:{const t=!this.readOnly()&&this.model.get("can_edit")
this.$el.html(xe(d().extend(e,{canManage:t})))}}this.$("input:first").focus()
return this}}var Ie=i(8639)
var De=i(93852)
function Te(){}Te.prototype.find=function(){let e
e=null
const t=(0,De.Z)(ENV.context_asset_string||"")
e=new l.Z
e.url="/api/v1/"+t[0]+"/"+t[1]+"/root_outcome_group"
e.fetch()
return[e]}
const Ne=Te
var Le=i(75758)
var Ae=f["default"]
var Fe=Ae.template,Ze=Ae.templates=Ae.templates||{}
var $e="/work/generated/ui/shared/outcome-content-view/jst/MoveOutcomeDialog"
Ze[$e]=Fe((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
n=n||{}
var s,a,r="",l=i.helperMissing,c=this.escapeExpression
r+="<div>\n  <form class='form-dialog'>\n    <div class='form-dialog-content'>\n    </div>\n    <div class='form-controls'>\n      <input type='button' class='btn' value='"+c((s=i.t||t&&t.t,a={hash:{i18n_inferred_key:true,i18n_scope:"move_outcome_dialog"},data:n},s?s.call(t,"cancel_caeb1e68","Cancel",a):l.call(t,"t","cancel_caeb1e68","Cancel",a)))+"'>\n      <input type='submit' class='btn btn-primary' value='"+c((s=i.t||t&&t.t,a={hash:{i18n_inferred_key:true,i18n_scope:"move_outcome_dialog"},data:n},s?s.call(t,"move_abf00365","Move",a):l.call(t,"t","move_abf00365","Move",a)))+"'>\n    </div>\n  <form>\n</div>"
return r}))
Le.Z.loadStylesheetForJST({id:"9f",bundle:"jst/MoveOutcomeDialog"})
const Pe=Ze[$e]
var Re=f["default"]
var Ve=Re.template,Ge=Re.templates=Re.templates||{}
var Ue="/work/generated/ui/shared/outcome-content-view/jst/noOutcomesWarning"
Ge[Ue]=Ve((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
n=n||{}
var s,a,r,l,c="",u=i.helperMissing,d=this.escapeExpression
c+='<div class="no-outcomes-warning">\n  <div class="alert" role="alert">\n    '
s=(r=i.__i18nliner_escape||t&&t.__i18nliner_escape,l={hash:{},data:n},r?r.call(t,t&&t.noOutcomesLinkLabel,l):u.call(t,"__i18nliner_escape",t&&t.noOutcomesLinkLabel,l))
a=(r=i.__i18nliner_escape||t&&t.__i18nliner_escape,l={hash:{},data:n},r?r.call(t,t&&t.addOutcomesUrl,l):u.call(t,"__i18nliner_escape",t&&t.addOutcomesUrl,l))
s=(r=i.__i18nliner_concat||t&&t.__i18nliner_concat,l={hash:{},data:n},r?r.call(t,'<a href="',a,'" aria-label="',s,'">$1</a>',l):u.call(t,"__i18nliner_concat",'<a href="',a,'" aria-label="',s,'">$1</a>',l))
c+=d((r=i.t||t&&t.t,l={hash:{w0:s,i18n_inferred_key:true,i18n_scope:"outcomes.no_outcomes_warning"},data:n},r?r.call(t,"you_have_no_outcomes_click_here_to_create_one_ebf262a3","You have no outcomes. *Click here* to create one.",l):u.call(t,"t","you_have_no_outcomes_click_here_to_create_one_ebf262a3","You have no outcomes. *Click here* to create one.",l)))+"\n  </div>\n</div>\n"
return c}))
const ze=Ge[Ue]
var We=i(84650)
var je=i(20912)
const Je=(0,s.useScope)("contentview")
class Ye extends a.ZP.View{initialize(e){let{readOnly:t,setQuizMastery:i,useForScoring:o,instructionsTemplate:n,renderInstructions:s,inFindDialog:a}=e
this.readOnly=t
this.inFindDialog=a
this.setQuizMastery=i
this.useForScoring=o
this.instructionsTemplate=n
this.renderInstructions=s
super.initialize(...arguments);(0,je.subscribe)("renderNoOutcomeWarning",this.renderNoOutcomeWarning.bind(this));(0,je.subscribe)("clearNoOutcomeWarning",this.clearNoOutcomeWarning.bind(this))
return this.render()}show(e){if(null!=e?e.isNew():void 0)return
return this._show({model:e})}add(e){this._show({model:e,state:"add"})
this.trigger("adding")
return this.innerView.on("addSuccess",(e=>this.trigger("addSuccess",e)))}_show(e){e={...e,readOnly:this.readOnly,inFindDialog:this.inFindDialog,setQuizMastery:this.setQuizMastery,useForScoring:this.useForScoring}
null!=this.innerView&&this.innerView.remove()
this.innerView=(()=>{if(e.model instanceof r.Z)return new ge(e)
if(e.model instanceof l.Z)return new ke(e)})()
this.render()
if(this.innerView instanceof ge)return this.innerView.screenreaderTitleFocus()}resetContent(){this.innerView=null
return this.render()}render(){this.attachEvents()
const e=(()=>{if(this.innerView)return this.innerView.render().el
if(this.renderInstructions)return this.instructionsTemplate()})()
this.$el.html(e)
return this}attachEvents(){if(null==this.innerView)return
this.innerView.on("deleteSuccess",(()=>this.trigger("deleteSuccess")))
return this.innerView.on("move",(e=>this.openDialog(e)))}openDialog(e){const t=this.createTree()
const i=this.createDialog()
const o={tree:t,window:i,model:e}
n()(t.$el).appendTo(".form-dialog-content")
n()(".form-controls .btn[type=button]").bind("click",(()=>i.dialog("close")))
n()(".form-controls .btn[type=submit]").bind("click",(e=>{e.preventDefault()
if(t.activeTree){this.trigger("move",o.model,t.activeTree.model)
return o.model.on("finishedMoving",(()=>i.dialog("close")))}return n().flashError(Je.t("No directory is selected, please select a directory before clicking 'move'"))}))
n()(o.window).dialog("option","title",Je.t("Where would you like to move %{title}?",{title:e.get("title")}))
n()(".ui-dialog :button").blur()
setTimeout((()=>o.tree.focusOnOpen()),200)}createTree(){const e=new Ie.Z({rootModelsFinder:new Ne,focusStyleClass:"MoveDialog__folderItem--focused",selectedStyleClass:"MoveDialog__folderItem--selected",onlyShowSubtrees:true,onClick(){Ie.Z.prototype.setActiveTree(this,e)}}).render()
return e}createDialog(){const e=n()(Pe()).dialog({dialogClass:"moveDialog",width:600,height:270,open(){n()(this).show()},close(e){n()(this).remove()}})
return e}remove(){return null!=this.innerView?this.innerView.off("addSuccess"):void 0}renderNoOutcomeWarning(){null!=this.$el&&this.$el.empty()
const e=Je.t("You have no outcomes. Click here to go to the outcomes page.")
return null!=this.$el?this.$el.append(n().raw(ze({addOutcomesUrl:`/${this._contextPath()}/outcomes`,noOutcomesLinkLabel:e}))):void 0}clearNoOutcomeWarning(){return null!=this.$el?this.$el.empty():void 0}}Ye.mixin(We.Z)},36106:(e,t,i)=>{i.d(t,{Z:()=>T})
var o=i(61323)
var n=i(6507)
var s=i.n(n)
var a=i(25683)
var r=i.n(a)
var l=i(87155)
var c=i(36202)
var u=i(8746)
var d=i(16916)
var h=i(28439)
var p=i(87295)
var m=i(64598)
var _=i(11015);(0,m.l)(f,_.Z)
function f(){return f.__super__.constructor.apply(this,arguments)}f.prototype.model=u.Z
const g=f
i(31218)
class v extends l.ZP.View{static initClass(){this.prototype.tagName="li"
this.prototype.attributes={tabindex:-1}
this.prototype.events={click:"triggerSelect",keydown:"onKeydown",focus:"onFocus"}
this.prototype.keyCodes={13:"Action",32:"Action",37:"LeftArrow",38:"UpArrow",39:"RightArrow",40:"DownArrow"}}initialize(e){super.initialize(...arguments)
this.readOnly=e.readOnly
this.dir=e.dir
return this.attachEvents()}attachEvents(){this.model.on("change:title",this.updateTitle,this)
this.model.on("remove",this.remove,this)
return this.model.on("select",this.triggerSelect,this)}triggerSelect(e){e&&e.preventDefault()
this.trigger("select",this)
return this.select()}onKeydown(e){const t=s()(e.target)
const i=`on${this.keyCodes[e.keyCode]}Key`
if(this[i])return this[i].call(this,e,t)&&e.preventDefault()}onUpArrowKey(e,t){return t.prev().focus()}onDownArrowKey(e,t){return t.next().focus()}onLeftArrowKey(e,t){if(!(t.parent().prev().length>0))return
return this.$el.parent().prev().find("[aria-expanded=true]").click().attr("aria-expanded",false).attr("tabindex",0).focus()}onActionKey(e,t){return t.hasClass("outcome-group")?this.onRightArrowKey(e,t):this.triggerSelect()}onFocus(e){const t=s()(e.target)
t.parents(".wrapper:first").find("[tabindex=0]").attr("tabindex",-1)
return t.attr("tabindex",0)}makeFocusable(){this.$el.parent().find("[tabindex=0]").attr("tabindex",-1)
return this.$el.attr("tabindex",0)}select(){this.makeFocusable()
return this.$el.addClass("selected")}unSelect(){return this.$el.removeClass("selected")}remove(){this.model.off("change:title",this.updateTitle,this)
this.model.off("remove",this.remove,this)
this.model.off("select",this.triggerSelect,this)
return super.remove(...arguments)}updateTitle(){this.$("span").text(this.model.get("title"))
return this.$("a").attr("title",(0,d.ZP)(this.model.get("title")))}render(){this.readOnly||this.initDraggable()
this.$el.data("view",this)
return this}initDraggable(){return this.$el.draggable({scope:"outcomes",containment:".outcomes-sidebar",opacity:.7,helper:"clone",revert:"invalid",scroll:false,drag(e,t){const i=s()(this).data("draggable")
const o=i.options
let n=false
const a=i.relative_container
const r=a.offset().left
const l=a.width()
e.pageX-r<o.scrollSensitivity?a[0].scrollLeft=n=a[0].scrollLeft-o.scrollSpeed:r+l-e.pageX<o.scrollSensitivity&&(a[0].scrollLeft=n=a[0].scrollLeft+o.scrollSpeed)
if(false!==n&&s().ui.ddmanager&&!o.dropBehaviour)return s().ui.ddmanager.prepareOffsets(i,e)}})}}v.initClass()
i(5777)
class y extends v{static initClass(){this.prototype.className="outcome-group"
this.prototype.attributes={...this.attributes,"aria-expanded":false}}onRightArrowKey(e,t){t.attr("aria-expanded",true).attr("tabindex",-1)
this.triggerSelect()
return setTimeout((()=>t.parent().next().find("li[tabindex=0]").focus()),1e3)}initDroppable(){return this.$el.droppable({scope:"outcomes",hoverClass:"droppable",greedy:true,drop:(e,t)=>{const{model:i}=t.draggable.data("view")
const o=i instanceof c.Z?i.outcomeGroup:i
if(o.id===this.model.id)return
const n=this.dir.sidebar._findLastDir()
this.triggerSelect()
const a=new(s().Deferred)
this.dir.$el.disableWhileLoading(a)
return this.dir.sidebar.dirForGroup(this.model).promise().done((e=>e.moveModelHere(i,n).done((()=>a.resolve()))))}})}render(){this.$el.attr("data-id",this.model.get("id"))
this.$el.html(`<a href="#" class="ellipsis" title="${(0,d.ZP)(this.model.get("title"))}">\n<i class="icon-folder"></i>\n<span>${(0,d.ZP)(this.model.get("title"))}</span>\n</a>`)
this.initDroppable()
return super.render(...arguments)}}y.initClass()
class b extends v{render(){this.$el.attr("data-id",this.model.get("id"))
this.$el.html(`<a href="#" class="ellipsis" title="${(0,d.ZP)(this.model.get("title"))}">\n<i class="icon-outcomes" aria-hidden="true"></i>\n<span>${(0,d.ZP)(this.model.get("title"))}</span>\n</a>`)
return super.render(...arguments)}}b.prototype.className="outcome-link"
var w=i(20912)
i(8180)
i(42449)
const x=(0,o.useScope)("OutcomesDirectoryView")
class S extends h.Z{static initClass(){this.prototype.tagName="ul"
this.prototype.className="outcome-level"}initialize(e){this.inFindDialog=e.inFindDialog
this.readOnly=e.readOnly
this.parent=e.parent
const t=e.outcomeGroup.attributes.title
const i=`Listing of child outcomes for ${t}`
this.$el.attr("aria-label",i)
this.needsReset=false
if(this.outcomeGroup=e.outcomeGroup){if(!this.groups){this.groups=new g
this.groups.url=this.outcomeGroup.get("subgroups_url")}this.groups.on("add reset",this.reset,this)
this.groups.on("remove",this.removeGroup,this)
this.groups.on("fetched:last",this.fetchOutcomes,this)
if(!this.outcomes){this.outcomes=new p.Z
this.outcomes.url=this.outcomeGroup.get("outcomes_url")+"?outcome_style=full"}this.outcomes.on("add remove reset",this.reset,this)}this.collection=this.groups
this.paginationScrollContainer=this.$el
super.initialize(e)
this.loadDfd=s().Deferred()
this.outcomeGroup&&this.$el.disableWhileLoading(this.groups.fetch())
if(e.selectFirstItem)return this.loadDfd.done(this.selectFirstOutcome.bind(this))}initDroppable(){return this.$el.droppable({scope:"outcomes",hoverClass:"outcome-level-hover",drop:(e,t)=>{if(t.draggable.parent().get(0)===e.target)return
const{model:i}=t.draggable.data("view")
return this.moveModelHere(i)}})}promise(){return this.loadDfd.promise()}moveModelHere(e,t){let i
e.collection.remove(e)
if(e instanceof u.Z){this.groups.add(e)
i=this.moveGroup(e,this.outcomeGroup.toJSON())}else{this.outcomes.add(e)
i=this.changeLink(e,this.outcomeGroup.toJSON())}return i.done((()=>{e.trigger("select")
if(t)return t.needsReset=true}))}changeLink(e,t){const i=new(s().Deferred)
this.$el.disableWhileLoading(i)
function o(e,t){i.reject()
return s().flashError(x.t("flash.error","An error occurred. Please refresh the page and try again."))}const n=e.outcomeGroup
e.outcomeGroup=t
e.setUrlTo("add")
s().ajaxJSON(e.url,"POST",{outcome_id:e.get("id"),move_from:n.id}).done((t=>{e.set(e.parse(t))
s().flashMessage(x.t("flash.updateSuccess","Update successful"))
return i.resolve()})).fail(o)
return i}moveGroup(e,t){const i=new(s().Deferred)
function o(e,t){i.reject()
return s().flashError(x.t("flash.error","An error occurred. Please refresh the page and try again."))}e.setUrlTo("edit")
s().ajaxJSON(e.url,"PUT",{parent_outcome_group_id:t.id}).done((t=>{e.set(e.parse(t))
s().flashMessage(x.t("flash.updateSuccess","Update successful"))
return i.resolve()})).fail(o)
this.$el.disableWhileLoading(i)
return i}makeFocusable(){if(this.$el.find("[tabindex=0]").length>0)return
if(this.views().length>0)return this.views()[0].makeFocusable()}selectFirstOutcome(){s()("ul.outcome-level li:first").click()}paginationLoaderTemplate(){return`<li><span class='loading-more'> ${(0,d.ZP)(x.t("Loading more results"))}</span></li>`}showPaginationLoader(){null==this.$paginationLoader&&(this.$paginationLoader=s()(this.paginationLoaderTemplate()))
return this.$el.append(this.$paginationLoader)}fetchOutcomes(){this.collection=this.outcomes
this.bindPaginationEvents()
this.outcomes.fetch({success:()=>this.loadDfd.resolve(this)})
this.startPaginationListener()
return this.showPaginationLoader()}triggerSelect(e){this.clearSelection()
this.selectedModel=e.model
e.select()
return this.trigger("select",this,e.model)}views(){if(this._views&&!r().isEmpty(this._views))return this._views
this._views=this._viewsFor(this.groups.models,y).concat(this._viewsFor(this.outcomes.models,b))
for(const e of this._views){e.on("select",this.triggerSelect.bind(this))
e.model===this.selectedModel&&e.select()}return this._views}reset(){this.needsReset=false
this._clearViews()
return this.render()}removeGroup(e){this.reset()
if(e===E(r().last(this.sidebar.directories),(e=>e.outcomeGroup)))return this.trigger("select",this,null)}remove(){this._clearViews()
this.selectedModel=null
return super.remove(...arguments)}clearSelection(e){null!=e&&e.preventDefault()
this.prevSelectedModel=this.selectedModel
this.selectedModel=null
return r().each(this.views(),(e=>e.unSelect()))}clearOutcomeSelection(){if("undefined"!==typeof Outcome&&this.selectedModel instanceof Outcome)return this.clearSelection()}render(){this.$el.empty()
if(this.needsReset)return this.reset()
r().each(this.views(),(e=>this.$el.append(e.render().el)))
this.inFindDialog&&this.handleWarning()
this.readOnly||this.initDroppable()
this.startPaginationListener()
this.$("li:first").attr("tabindex",0)
this.$el.data("view",this)
return this}handleWarning(){return!this.parent&&r().isEmpty(this.groups.models)&&r().isEmpty(this.outcomes.models)&&r().isEmpty(this.views())?(0,w.publish)("renderNoOutcomeWarning"):(0,w.publish)("clearNoOutcomeWarning")}_viewsFor(e,t){return r().map(e,(e=>new t({model:e,readOnly:this.readOnly,dir:this})))}_clearViews(){r().each(this._views,(e=>e.remove()))
return this._views=null}}S.initClass()
function E(e,t){return"undefined"!==typeof e&&null!==e?t(e):void 0}class C extends S{initialize(e){this.outcomes=new p.Z
this.groups=new g
this.groups.url=ENV.ACCOUNT_CHAIN_URL
return super.initialize(e)}fetchOutcomes(){}}class O extends S{initialize(e){this.outcomes=new p.Z
return super.initialize(...arguments)}fetchOutcomes(){}}const M=(0,o.useScope)("outcomesFindDirectoryVew")
class k extends S{initialize(e){let t,i
this.readOnly=true
const o=new u.Z({dontImport:true,id:-1,title:M.t("account_standards","Account Standards"),description:M.t("account_standards_description","To the left you'll notice the standards your institution has created for you to use in your courses."),directoryClass:C})
if(ENV.STATE_STANDARDS_URL){i=new u.Z({dontImport:true,title:M.t("state_standards","State Standards"),description:M.t("state_standards_description","To the left you'll see a folder for each state with their updated state standards. This allows for you to painlessly include state standards for grading within your course."),directoryClass:O})
i.url=ENV.STATE_STANDARDS_URL}e.courseGroup&&(t=e.courseGroup)
this.outcomes=new p.Z
this.groups=new g(r().compact([o,i,t]))
this.collection=this.groups
const n=(()=>{const e=[]
for(const t of r().compact([i])){t.on("change",this.revertTitle)
e.push(t.fetch())}return e})()
return this.$el.disableWhileLoading(s().when(...Array.from(n||[])).done((()=>setTimeout((()=>{this.reset()
return this.$el.find("[tabindex=0]:first").focus()})))))}revertTitle(e){return e.set({title:e.previous("title"),description:e.previous("description")},{silent:true})}}const I=(0,o.useScope)("outcomesSidebarView")
let D
class T extends l.ZP.View{static initClass(){this.prototype.directoryWidth=200
this.prototype.entryHeight=30
this.prototype.events={"click .outcome-level":"clickOutcomeLevel"}}initialize(e){super.initialize(...arguments)
this.inFindDialog=e.inFindDialog
this.readOnly=e.readOnly
this.selectFirstItem=e.selectFirstItem
this.directories=[]
this.cachedDirectories={}
this.$sidebar=this.$el.parent()
this.$sidebar.width(this.directoryWidth);(this.rootOutcomeGroup=e.rootOutcomeGroup)?this.addDirFor(this.rootOutcomeGroup,true):this.addDir(e.directoryView)
return this.render()}clickOutcomeLevel(e){const t=e.target===e.currentTarget
if(!t)return
const i=s()(e.target).data("view")
return this.selectDir(i)}resetSidebar(){r().each(this.directories,(e=>e.remove()))
this.directories=[]
this.cachedDirectories={}
return this.addDirFor(this.rootOutcomeGroup,true)}addDirFor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
let i
if(this.cachedDirectories[e.id])i=this.cachedDirectories[e.id]
else{const o=r().last(this.directories)
const n=e.get("directoryClass")||S
const s=r().indexOf(this.directories,this.selectedDir())
i=new n({outcomeGroup:e,parent:o,readOnly:this.readOnly,selectFirstItem:t&&this.selectFirstItem,inFindDialog:this.inFindDialog,directoryDepth:s+1})
this.firstDir=false}return this.addDir(i)}addDir(e){e.outcomeGroup&&(this.cachedDirectories[e.outcomeGroup.id]=e)
e.off("select")
e.on("select",this.selectDir,this)
e.sidebar=this
e.clearSelection()
this.directories.push(e)
this.updateSidebarWidth()
this.renderDir(e)
return e}addAndSelect(e){e instanceof c.Z?e.outcomeGroup=this.selectedGroup().toJSON():e.set("parent_outcome_group",this.selectedGroup().toJSON())
const t=this._findLastDir((e=>!e.selectedModel||e.selectedModel instanceof c.Z))
e instanceof c.Z?t.outcomes.add(e):t.groups.add(e)
this._scrollToDir(r().indexOf(this.directories,t),e)
return e.trigger("select")}selectDir(e,t){const i=e||this.directories[0]
i&&!t&&i.clearSelection()
const o=r().indexOf(this.directories,i)
const n=this.directories.splice(o+1,this.directories.length-(o+1))
r().each(n,(e=>e.remove()))
const s=t instanceof u.Z&&!t.isNew()
s&&this.addDirFor(t)
this.updateSidebarWidth()
const a=s?o+1:o
this._scrollToDir(a,t)
let l=t
this.goingBack&&(l=i.parent?i.outcomeGroup:null)
return this.trigger("select",l,this.directories)}refreshSelection(e){const t=this.selectedDir()
if(e===t.selectedModel){t.clearSelection()
return e.trigger("select")}}selectedDir(){return this._findLastDir((e=>e.selectedModel))}selectedModel(){return N(this.selectedDir(),(e=>e.selectedModel))}selectedGroup(){let e=null
this._findLastDir((t=>{if(t.selectedModel instanceof u.Z)return e=t.selectedModel}))
return e||this.rootOutcomeGroup}clearOutcomeSelection(){return r().last(this.directories).clearOutcomeSelection()}goBack(){this.goingBack=true
if(this.selectedModel()instanceof u.Z)this.selectDir(this.selectedDir())
else{const e=r().indexOf(this.directories,this.selectedDir())
this.selectDir(this.directories[e-1])}this.selectedDir().makeFocusable()
return this.goingBack=false}updateSidebarWidth(){const e=1===this.directories.length?this.directoryWidth:2*this.directoryWidth
this.$el.css({width:this.directoryWidth*this.directories.length})
return this.$sidebar.animate({width:e})}renderDir(e){return this.$el.append(e.render().el)}render(){this.$el.empty()
r().each(this.directories,(e=>this.renderDir(e)))
return this}findDialog(e){if(D)D.updateSelection(this.selectedGroup())
else{D=new e({title:I.t("titles.find_outcomes","Find Outcomes"),selectedGroup:this.selectedGroup(),directoryView:new k({outcomeGroup:this.selectedGroup()})})
D.on("import",this.addAndSelect,this)}return D.show()}dirForGroup(e){return r().find(this.directories,(t=>t.outcomeGroup===e))||this.addDirFor(e)}moveItem(e,t){let i
const o=e.get("parent_outcome_group")||e.outcomeGroup
const n=this.cachedDirectories[o.id]
const a=this.cachedDirectories[t.id]
if(o.id===t.id){s().flashError(I.t("%{model} is already located in %{newGroup}",{model:e.get("title"),newGroup:t.get("title")}))
return}i=e instanceof u.Z?n.moveGroup(e,t.toJSON()):n.changeLink(e,t.toJSON())
return i.done((()=>{const o=e instanceof u.Z?"groups":"outcomes"
if(a){i=a[o].fetch()
i.done((()=>a.needsReset=true))}n[o].fetch()
const r=n.parent
r&&this.selectDir(r,r.selectedModel)
e.trigger("finishedMoving")
s()(".selected:last").focus()
return setTimeout((()=>s().flashMessage(I.t("Successfully moved %{model} to %{newGroup}",{model:e.get("title"),newGroup:t.get("title")}))),1500)}))}_scrollToDir(e,t){const i=this.directoryWidth*(t instanceof c.Z?e-1:e)
this.$sidebar.animate({scrollLeft:i},{duration:200})
const o=(this.entryHeight+1)*r().indexOf(this.directories[e].views(),r().find(this.directories[e].views(),(e=>e.model===t)))
return this.directories[e].$el.animate({scrollTop:o},{duration:200})}_findLastDir(e){return r().find(r().clone(this.directories).reverse(),e)||r().last(this.directories)}}T.initClass()
function N(e,t){return"undefined"!==typeof e&&null!==e?t(e):void 0}},87295:(e,t,i)=>{i.d(t,{Z:()=>r})
var o=i(64598)
var n=i(11015)
var s=i(36202);(0,o.l)(a,n.Z)
function a(){return a.__super__.constructor.apply(this,arguments)}a.prototype.model=s.Z
const r=a},36202:(e,t,i)=>{i.d(t,{Z:()=>d})
var o=i(64598)
var n=i(61323)
var s=i(25683)
var a=i.n(s)
var r=i(87155)
var l=i(70265)
const c=(0,n.useScope)("modelsOutcome");(0,o.l)(u,r.ZP.Model)
function u(){return u.__super__.constructor.apply(this,arguments)}u.prototype.defaults={mastery_points:3,points_possible:5,ratings:[{description:c.t("criteria.exceeds_expectations","Exceeds Expectations"),points:5},{description:c.t("criteria.meets_expectations","Meets Expectations"),points:3},{description:c.t("criteria.does_not_meet_expectations","Does Not Meet Expectations"),points:0}]}
u.prototype.setMasteryScales=function(){const e=ENV.MASTERY_SCALE.outcome_proficiency.ratings
return this.set({ratings:e,mastery_points:a().find(e,(function(e){return e.mastery})).points,points_possible:Math.max.apply(Math,a().map(e,(function(e){return e.points})))})}
u.prototype.defaultCalculationInt=function(){return{n_mastery:5,weighted_average:65,decaying_average:65,standard_decaying_average:65}[this.get("calculation_method")]}
u.prototype.initialize=function(){let e
this.get("calculation_method")||this.setDefaultCalcSettings()
ENV.ACCOUNT_LEVEL_MASTERY_SCALES&&(null!=(e=ENV.MASTERY_SCALE)?e.outcome_proficiency:void 0)&&this.setMasteryScales()
this.on("change:calculation_method",(t=this,function(e,i){return e.set({calculation_int:t.defaultCalculationInt()})}))
var t
return u.__super__.initialize.apply(this,arguments)}
u.prototype.setDefaultCalcSettings=function(){let e="decaying_average"
ENV.OUTCOMES_NEW_DECAYING_AVERAGE_CALCULATION&&(e="weighted_average")
return this.set({calculation_method:e,calculation_int:"65"})}
u.prototype.calculationMethodContent=function(){return new l.Z(this)}
u.prototype.calculationMethods=function(){return this.calculationMethodContent().toJSON()}
u.prototype.name=function(){return this.get("title")}
u.prototype.canManage=function(){return this.get("can_edit")||this.canManageInContext()}
u.prototype.canManageInContext=function(){let e,t,i
return"Course"===(null!=(e=ENV.ROOT_OUTCOME_GROUP)?e.context_type:void 0)&&(null!=(t=ENV.PERMISSIONS)?t.manage_outcomes:void 0)&&(null!=(i=ENV.current_user_roles)?i.includes("admin"):void 0)}
u.prototype.isNative=function(){return this.outcomeLink&&this.get("context_id")===this.outcomeLink.context_id&&this.get("context_type")===this.outcomeLink.context_type}
u.prototype.isAbbreviated=function(){return!this.has("description")}
u.prototype.parse=function(e){if(e.outcome){this.outcomeLink=e
this.outcomeGroup=e.outcome_group
return e.outcome}return e}
u.prototype.present=function(){return a().extend({},this.toJSON(),this.calculationMethodContent().present())}
u.prototype.setUrlTo=function(e){return this.url=function(){switch(e){case"add":return this.outcomeGroup.outcomes_url
case"edit":return this.get("url")
case"delete":return this.outcomeLink.url}}.call(this)}
u.prototype.save=function(e,t){if(ENV.ACCOUNT_LEVEL_MASTERY_SCALES){this.unset("mastery_points")
this.unset("points_possible")
this.unset("ratings")
this.unset("calculation_method")
this.unset("calculation_int")}return u.__super__.save.apply(this,arguments)}
const d=u},8746:(e,t,i)=>{i.d(t,{Z:()=>d})
var o=i(6507)
var n=i.n(o)
var s=i(64598)
var a=i(87155)
var r=i(87295)
var l=i(11015);(0,s.l)(c,a.ZP.Model)
function c(){return c.__super__.constructor.apply(this,arguments)}c.prototype.initialize=function(e){this.setUpOutcomesAndGroupsIfNeeded()
return c.__super__.initialize.apply(this,arguments)}
c.prototype.name=function(){return this.get("title")}
c.prototype.isAbbreviated=function(){return!this.has("description")}
c.prototype.setUrlTo=function(e){return this.url=function(){switch(e){case"add":case"move":return this.get("parent_outcome_group").subgroups_url
case"edit":case"delete":return this.get("url")}}.call(this)}
c.prototype.setUpOutcomesAndGroupsIfNeeded=function(){this.outcomeGroups||(this.outcomeGroups=new u([],{parentGroup:this}))
if(!this.outcomes)return this.outcomes=new r.Z([])}
c.prototype.getSubtrees=function(){return this.outcomeGroups}
c.prototype.getItems=function(){return this.outcomes}
c.prototype.expand=function(e,t){null==e&&(e=false)
null==t&&(t={})
this.isExpanded=true
this.trigger("expanded")
if(this.expandDfd||e)return n().when()
this.isExpanding=true
this.trigger("beginexpanding")
this.expandDfd=n().Deferred().done((i=this,function(){i.isExpanding=false
return i.trigger("endexpanding")}))
var i
let o,s
let a
let r
0!==this.get("outcomeGroups_count")&&(r=null!=(o=this.outcomeGroups)?o.fetch():void 0)
0===this.get("outcomes_count")||t.onlyShowSubtrees||(a=null!=(s=this.outcomes)?s.fetch():void 0)
return n().when(r,a).done(this.expandDfd.resolve)}
c.prototype.collapse=function(){this.isExpanded=false
return this.trigger("collapsed")}
c.prototype.toggle=function(e){return this.isExpanded?this.collapse():this.expand(false,e)};(0,s.l)(u,l.Z)
function u(){return u.__super__.constructor.apply(this,arguments)}u.optionProperty("parentGroup")
u.prototype.model=c
u.prototype.url=function(){return this.parentGroup.attributes.subgroups_url}
const d=c},83440:(e,t,i)=>{i.d(t,{Z:()=>y})
var o=i(61323)
var n=i(6507)
var s=i.n(n)
var a=i(8746)
var r=i(82608)
var l=i(8922)
var c=i(36106)
var u=i(26339)
var d=i(13892)
var h=i(40202)
i(89014)
var p=h["default"]
var m=p.template,_=p.templates=p.templates||{}
var f="/work/generated/ui/shared/outcomes/jst/findInstructions"
_[f]=m((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
n=n||{}
var s,a,r="",l=i.helperMissing,c=this.escapeExpression
r+='<div class="wrapper">\n  <h2 class="title">\n    '+c((s=i.t||t&&t.t,a={hash:{i18n_scope:"outcomes.find_instructions"},data:n},s?s.call(t,"outcomes.find_instructions.instructions.find.title","Finding Outcomes",a):l.call(t,"t","outcomes.find_instructions.instructions.find.title","Finding Outcomes",a)))+'\n  </h2>\n  <div class="description">\n    '+c((s=i.t||t&&t.t,a={hash:{w0:"<p>$1</p>",i18n_scope:"outcomes.find_instructions"},data:n},s?s.call(t,"outcomes.find_instructions.instructions.find.description","*Outcomes created by your institution, or state can be accessed here. Just like in your course, the panel to the left will allow you to navigate between existing outcomes. Once you have found the outcome or outcome group you wish to use, click the import button below to add it to your course.*",a):l.call(t,"t","outcomes.find_instructions.instructions.find.description","*Outcomes created by your institution, or state can be accessed here. Just like in your course, the panel to the left will allow you to navigate between existing outcomes. Once you have found the outcome or outcome group you wish to use, click the import button below to add it to your course.*",a)))+"\n  </div>\n</div>\n"
return r}))
const g=_[f]
i(42449)
i(5777)
const v=(0,o.useScope)("outcomesFindDialog")
class y extends l.Z{dialogOptions(){return{id:"import_dialog",title:this.title,width:1e3,resizable:true,close(){s()(".find_outcome").focus()},buttons:[{text:v.t("#buttons.cancel","Cancel"),click:e=>this.cancel(e)},{text:v.t("#buttons.import","Import"),class:"btn-primary",click:e=>this.import(e)}]}}initialize(e){this.selectedGroup=e.selectedGroup
this.title=e.title
this.shouldImport=false!==e.shouldImport
this.disableGroupImport=e.disableGroupImport
super.initialize(...arguments)
this.render()
this.dialog.parent().find(".ui-dialog-buttonpane").css("margin-top",0)
this.sidebar=new c.Z({el:this.$el.find(".outcomes-sidebar .wrapper"),directoryView:e.directoryView,rootOutcomeGroup:e.rootOutcomeGroup,readOnly:true,inFindDialog:true})
this.content=new u.Z({el:this.$el.find(".outcomes-content"),instructionsTemplate:g,readOnly:true,inFindDialog:true,setQuizMastery:e.setQuizMastery,useForScoring:e.useForScoring})
this.sidebar.on("select",this.content.show.bind(this.content))
this.sidebar.on("select",this.showOrHideImport.bind(this))
return this.showOrHideImport()}updateSelection(e){return this.selectedGroup=e}import(e){e.preventDefault()
const t=this.sidebar.selectedModel()
this.content.setQuizMastery&&(t.quizMasteryLevel=parseFloat(this.$el.find("#outcome_mastery_at").val())||0)
this.content.useForScoring&&(t.useForScoring=this.$el.find("#outcome_use_for_scoring").prop("checked"))
if(t.get("dontImport"))return alert(v.t("dont_import","This group cannot be imported."))
if(!this.shouldImport){this.trigger("import",t)
this.close()
return}if(window.confirm(this.confirmText(t))){let e,i
if(t instanceof a.Z){i=this.selectedGroup.get("import_url")
const o=new r.Z
e=s().ajaxJSON(i,"POST",{source_outcome_group_id:t.get("id"),async:true}).pipe((e=>{o.set("url",e.url)
o.poll()
return o.pollDfd})).pipe((()=>s().ajaxJSON(o.get("results").outcome_group_url,"GET")))}else{i=this.selectedGroup.get("outcomes_url")
e=s().ajaxJSON(i,"POST",{outcome_id:t.get("id")})}this.$el.disableWhileLoading(e)
return s().when(e).done(((e,i,o)=>{const n=t.clone()
if(n instanceof a.Z)n.set(e)
else{n.outcomeLink={...t.outcomeLink}
n.outcomeGroup=e.outcome_group
n.outcomeLink.url=e.url
n.set({context_id:e.context_id,context_type:e.context_type})}this.trigger("import",n)
this.close()
return s().flashMessage(v.t("flash.importSuccess","Import successful"))})).fail((()=>s().flashError(v.t("flash.importError","An error occurred while importing. Please try again later."))))}}render(){this.$el.html((0,d.Z)({skipToolbar:true}))
return this}showOrHideImport(){const e=this.sidebar.selectedModel()
let t=true;(!e||e.get("dontImport")||e&&e instanceof a.Z&&this.disableGroupImport)&&(t=false)
s()(".ui-dialog-buttonpane .btn-primary").toggle(t)}confirmText(e){const t=this.selectedGroup.get("title")||v.t("top_level","%{context} Top Level",{context:this.selectedGroup.get("context_type")})
return e instanceof a.Z?v.t("confirm.import_group",'Import group "%{group}" to group "%{target}"?',{group:e.get("title"),target:t}):v.t("confirm.import_outcome",'Import outcome "%{outcome}" to group "%{target}"?',{outcome:e.get("title"),target:t})}}},28439:(e,t,i)=>{i.d(t,{Z:()=>g})
var o=i(64598)
var n=i(25683)
var s=i.n(n)
var a=i(6507)
var r=i.n(a)
var l=i(87155)
var c=i(40202)
i(61323)
i(89014)
var u=i(75758)
var d=c["default"]
var h=d.template,p=d.templates=d.templates||{}
var m="/work/generated/ui/shared/pagination/jst/PaginatedView"
p[m]=h((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
n=n||{}
var s,a,r="",l=i.helperMissing,c=this.escapeExpression
r+='<div class="paginatedView-loading" role="alert" aria-live="assertive">\n    <span>'+c((s=i.t||t&&t.t,a={hash:{i18n_scope:"paginated_view"},data:n},s?s.call(t,"paginated_view.loading_more_results","Loading more results",a):l.call(t,"t","paginated_view.loading_more_results","Loading more results",a)))+"</span>\n</div>\n"
return r}))
u.Z.loadStylesheetForJST({id:"2c",bundle:"jst/PaginatedView"})
const _=p[m];(0,o.l)(f,l.ZP.View)
function f(){return f.__super__.constructor.apply(this,arguments)}f.prototype.paginationLoaderTemplate=_
f.prototype.paginationScrollContainer=window
f.prototype.distanceTillFetchNextPage=100
f.prototype.initialize=function(e){const t=f.__super__.initialize.call(this,e)
this.fetchOptions=e.fetchOptions
this.bindPaginationEvents()
this.paginationStopped=false
return t}
f.prototype.render=function(){const e=f.__super__.render.apply(this,arguments)
this.collection.fetchingNextPage&&this.showPaginationLoader()
this.startPaginationListener()
return e}
f.prototype.showPaginationLoader=function(){null==this.$paginationLoader&&(this.$paginationLoader=r()(this.paginationLoaderTemplate()))
return this.placePaginationLoader()}
f.prototype.placePaginationLoader=function(){let e
return null!=(e=this.$paginationLoader)?e.insertAfter(this.el):void 0}
f.prototype.hidePaginationLoader=function(){let e
return null!=(e=this.$paginationLoader)?e.remove():void 0}
f.prototype.distanceToBottom=function(){const e=r()(this.paginationScrollContainer)
const t=e[0]===window?r()(document).height():e[0].scrollHeight
return t-e.scrollTop()-e.height()}
f.prototype.startPaginationListener=function(){if(this.paginationStopped)return
const e=r().proxy(this.fetchNextPageIfNeeded,this)
r()(this.paginationScrollContainer).on("scroll.pagination:"+this.cid,e)
r()(this.paginationScrollContainer).on("resize.pagination:"+this.cid,e)
return this.fetchNextPageIfNeeded()}
f.prototype.stopPaginationListener=function(){this.paginationStopped=true
return r()(this.paginationScrollContainer).off(".pagination:"+this.cid)}
f.prototype.fetchNextPageIfNeeded=function(){return setTimeout((e=this,function(){if(e.collection.fetchingNextPage)return
if(!e.collection.urls||!e.collection.urls.next){e.collection.length&&e.stopPaginationListener()
return}const t=e.distanceToBottom()<e.distanceTillFetchNextPage||!e.collection.length
if(r()(e.paginationScrollContainer).is(":visible")&&t)return e.collection.fetch(s().extend({page:"next"},e.fetchOptions))}),0)
var e}
f.prototype.bindPaginationEvents=function(){this.collection.on("beforeFetch:next",this.showPaginationLoader,this)
this.collection.on("fetch:next",this.hidePaginationLoader,this)
return this.collection.on("all",this.fetchNextPageIfNeeded,this)}
const g=f},8180:(e,t,i)=>{var o=i(6507)
var n=i.n(o)
i(33108)
i(11516)
i(12037)
i(31218)
n().widget("ui.droppable",{version:"@VERSION",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var e=this.options,t=e.accept
this.isover=0
this.isout=1
this.accept=n().isFunction(t)?t:function(e){return e.is(t)}
this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}
n().ui.ddmanager.droppables[e.scope]=n().ui.ddmanager.droppables[e.scope]||[]
n().ui.ddmanager.droppables[e.scope].push(this)
e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var e=n().ui.ddmanager.droppables[this.options.scope]
for(var t=0;t<e.length;t++)e[t]==this&&e.splice(t,1)
this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,t){"accept"==e&&(this.accept=n().isFunction(t)?t:function(e){return e.is(t)})
n().Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var t=n().ui.ddmanager.current
this.options.activeClass&&this.element.addClass(this.options.activeClass)
t&&this._trigger("activate",e,this.ui(t))},_deactivate:function(e){var t=n().ui.ddmanager.current
this.options.activeClass&&this.element.removeClass(this.options.activeClass)
t&&this._trigger("deactivate",e,this.ui(t))},_over:function(e){var t=n().ui.ddmanager.current
if(!t||(t.currentItem||t.element)[0]==this.element[0])return
if(this.accept.call(this.element[0],t.currentItem||t.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass)
this._trigger("over",e,this.ui(t))}},_out:function(e){var t=n().ui.ddmanager.current
if(!t||(t.currentItem||t.element)[0]==this.element[0])return
if(this.accept.call(this.element[0],t.currentItem||t.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)
this._trigger("out",e,this.ui(t))}},_drop:function(e,t){var i=t||n().ui.ddmanager.current
if(!i||(i.currentItem||i.element)[0]==this.element[0])return false
var o=false
this.element.find(":data(droppable)").not(".ui-draggable-dragging").each((function(){var e=n().data(this,"droppable")
if(e.options.greedy&&!e.options.disabled&&e.options.scope==i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&n().ui.intersect(i,n().extend(e,{offset:e.element.offset()}),e.options.tolerance)){o=true
return false}}))
if(o)return false
if(this.accept.call(this.element[0],i.currentItem||i.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass)
this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)
this._trigger("drop",e,this.ui(i))
return this.element}return false},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}})
n().ui.intersect=function(e,t,i){if(!t.offset)return false
var o=(e.positionAbs||e.position.absolute).left,s=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,r=a+e.helperProportions.height
var l=t.offset.left,c=l+t.proportions.width,u=t.offset.top,d=u+t.proportions.height
switch(i){case"fit":return l<=o&&s<=c&&u<=a&&r<=d
case"intersect":return l<o+e.helperProportions.width/2&&s-e.helperProportions.width/2<c&&u<a+e.helperProportions.height/2&&r-e.helperProportions.height/2<d
case"pointer":var h=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,p=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,m=n().ui.isOver(p,h,u,l,t.proportions.height,t.proportions.width)
return m
case"touch":return(a>=u&&a<=d||r>=u&&r<=d||a<u&&r>d)&&(o>=l&&o<=c||s>=l&&s<=c||o<l&&s>c)
default:return false}}
n().ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,t){var i=n().ui.ddmanager.droppables[e.options.scope]||[]
var o=t?t.type:null
var s=(e.currentItem||e.element).find(":data(droppable)").andSelf()
e:for(var a=0;a<i.length;a++){if(i[a].options.disabled||e&&!i[a].accept.call(i[a].element[0],e.currentItem||e.element))continue
for(var r=0;r<s.length;r++)if(s[r]==i[a].element[0]){i[a].proportions.height=0
continue e}i[a].visible="none"!=i[a].element.css("display")
if(!i[a].visible)continue
"mousedown"==o&&i[a]._activate.call(i[a],t)
i[a].offset=i[a].element.offset()
i[a].proportions={width:i[a].element[0].offsetWidth,height:i[a].element[0].offsetHeight}}},drop:function(e,t){var i=false
n().each(n().ui.ddmanager.droppables[e.options.scope]||[],(function(){if(!this.options)return
!this.options.disabled&&this.visible&&n().ui.intersect(e,this,this.options.tolerance)&&(i=this._drop.call(this,t)||i)
if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)){this.isout=1
this.isover=0
this._deactivate.call(this,t)}}))
return i},dragStart:function(e,t){e.element.parentsUntil("body").bind("scroll.droppable",(function(){e.options.refreshPositions||n().ui.ddmanager.prepareOffsets(e,t)}))},drag:function(e,t){e.options.refreshPositions&&n().ui.ddmanager.prepareOffsets(e,t)
n().each(n().ui.ddmanager.droppables[e.options.scope]||[],(function(){if(this.options.disabled||this.greedyChild||!this.visible)return
var i=n().ui.intersect(e,this,this.options.tolerance)
var o=i||1!=this.isover?i&&0==this.isover?"isover":null:"isout"
if(!o)return
var s
if(this.options.greedy){var a=this.element.parents(":data(droppable):eq(0)")
if(a.length){s=n().data(a[0],"droppable")
s.greedyChild="isover"==o?1:0}}if(s&&"isover"==o){s["isover"]=0
s["isout"]=1
s._out.call(s,t)}this[o]=1
this["isout"==o?"isover":"isout"]=0
this["isover"==o?"_over":"_out"].call(this,t)
if(s&&"isout"==o){s["isout"]=0
s["isover"]=1
s._over.call(s,t)}}))},dragStop:function(e,t){e.element.parentsUntil("body").unbind("scroll.droppable")
e.options.refreshPositions||n().ui.ddmanager.prepareOffsets(e,t)}}},82044:(e,t,i)=>{i.d(t,{Z:()=>s})
var o=i(45982)
var n=i(65984)
function s(e){return(new o["default"].html.Serializer).serialize(new o["default"].html.DomParser({validate:true},a()).parse(e))}function a(){const e=new o["default"].html.Schema
e.setValidElements(n.iC.valid_elements)
e.addValidElements(n.iC.extended_valid_elements)
return e}},13892:(e,t,i)=>{i.d(t,{Z:()=>l})
var o=i(40202)
i(61323)
i(89014)
var n=o["default"]
var s=n.template,a=n.templates=n.templates||{}
var r="/work/generated/ui/shared/outcomes/jst/browser"
a[r]=s((function(e,t,i,o,n){this.compilerInfo=[4,">= 1.0.0"]
i=this.merge(i,e.helpers)
n=n||{}
var s,a="",r=i.helperMissing,l=this.escapeExpression,c=this
function u(e,t){var o,n,s,a=""
a+='\n  <div class="toolbar outcomes-toolbar">\n    <button class="go_back ui-button ui-widget ui-state-default ui-corner-all" style="display:none">\n      '+l((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.browser"},data:t},n?n.call(e,"back_2900f52a","Back",s):r.call(e,"t","back_2900f52a","Back",s)))+"\n    </button>\n\n    "
o=i["if"].call(e,e&&e.canManageOutcomes,{hash:{},inverse:c.noop,fn:c.program(2,d,t),data:t});(o||0===o)&&(a+=o)
a+="\n  </div>\n  "
return a}function d(e,t){var o,n,s,a=""
a+='\n    <button class="add_outcome_link ui-button ui-widget ui-state-default ui-corner-all" aria-label="'+l((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.browser"},data:t},n?n.call(e,"add_a_new_outcome_cbdbe96c","Add a New Outcome",s):r.call(e,"t","add_a_new_outcome_cbdbe96c","Add a New Outcome",s)))+'">\n      <i class="icon-plus"></i>\n      <span class="ui-button-text" aria-hidden="true">'+l((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.browser"},data:t},n?n.call(e,"outcome_da397d20","Outcome",s):r.call(e,"t","outcome_da397d20","Outcome",s)))+'</span>\n    </button>\n    <button class="add_outcome_group ui-button ui-widget ui-state-default ui-corner-all" aria-label="'+l((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.browser"},data:t},n?n.call(e,"add_a_new_outcome_group_e3fab2fc","Add a New Outcome Group",s):r.call(e,"t","add_a_new_outcome_group_e3fab2fc","Add a New Outcome Group",s)))+'">\n      <i class="icon-plus"></i>\n      <span class="ui-button-text" aria-hidden="true">'+l((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.browser"},data:t},n?n.call(e,"group_a8f5ed9c","Group",s):r.call(e,"t","group_a8f5ed9c","Group",s)))+"</span>\n    </button>\n    "
o=i["if"].call(e,e&&e.canImportOutcomes,{hash:{},inverse:c.noop,fn:c.program(3,h,t),data:t});(o||0===o)&&(a+=o)
a+='\n    <button class="find_outcome ui-button ui-widget ui-state-default ui-corner-all" aria-label="'+l((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.browser"},data:t},n?n.call(e,"find_an_outcome_919328e6","Find an Outcome",s):r.call(e,"t","find_an_outcome_919328e6","Find an Outcome",s)))+'">\n      <i class="icon-search"></i>\n      <span class="ui-button-text" aria-hidden="true">'+l((n=i.t||e&&e.t,s={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.browser"},data:t},n?n.call(e,"find_8d605019","Find",s):r.call(e,"t","find_8d605019","Find",s)))+"</span>\n    </button>\n    "
return a}function h(e,t){var o,n,s=""
s+='\n      <button class="import_outcomes ui-button ui-widget ui-state-default ui-corner-all" aria-label="'+l((o=i.t||e&&e.t,n={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.browser"},data:t},o?o.call(e,"import_a_set_of_outcomes_6b782192","Import a set of Outcomes",n):r.call(e,"t","import_a_set_of_outcomes_6b782192","Import a set of Outcomes",n)))+'">\n        <i class="icon-upload"></i>\n        <span class="ui-button-text" aria-hidden="true">'+l((o=i.t||e&&e.t,n={hash:{i18n_inferred_key:true,i18n_scope:"outcomes.browser"},data:t},o?o.call(e,"import_1b31507","Import",n):r.call(e,"t","import_1b31507","Import",n)))+"</span>\n      </button>\n    "
return s}a+='<div class="outcomes-browser content-box">\n\n  '
s=i.unless.call(t,t&&t.skipToolbar,{hash:{},inverse:c.noop,fn:c.program(1,u,n),data:n});(s||0===s)&&(a+=s)
a+='\n\n\n\n  <div class="outcomes-main">\n    <div class="outcomes-sidebar">\n      <div class="wrapper"></div>\n    </div>\n    <div class="outcomes-content">\n    </div>\n  </div>\n</div>\n'
return a}))
const l=a[r]}}])

//# sourceMappingURL=83440-c-7e10ec0a28.js.map